<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Connel Hooley - A C# Developer&#39;s Intro to F#</title>
  
  <link rel="stylesheet" href="/assets/css/main.css">
  

  <link rel="alternate" type="application/rss+xml" title="Connel Hooley" href="/feed.xml">  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#f8bb15">
  <meta name="theme-color" content="#f8bb15">
  

  <!-- Begin Jekyll SEO tag v2.1.0 -->
<meta property="og:title" content="A C# Developer’s Intro to F#" />
<meta name="description" content="A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory." />
<meta property="og:description" content="A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory." />
<link rel="canonical" href="http://connelhooley.uk/blog/2017/04/10/f-sharp-intro" />
<meta property="og:url" content="http://connelhooley.uk/blog/2017/04/10/f-sharp-intro" />
<meta property="og:site_name" content="Connel Hooley" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-04-10T14:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@connel_dev" />
<meta name="twitter:creator" content="@connel_dev" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "A C# Developer’s Intro to F#",
"datePublished": "2017-04-10T14:00:00+01:00",
"description": "A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory.",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "http://connelhooley.uk/assets/images/logo.png"}},
"url": "http://connelhooley.uk/blog/2017/04/10/f-sharp-intro"}</script>
<!-- End Jekyll SEO tag -->

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57397582-1', 'auto');
  ga('send', 'pageview');

</script>
  

  
</head>

  <body class="layout-post">
    <header class="site-header" role="banner">
  <div class="site-header-content">
    <div class="site-nav-wrapper">
      <nav class="site-nav navbar navbar-toggleable-md" role="navigation">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#collapseNavbar" aria-controls="collapseNavbar" aria-expanded="false" aria-label="Toggle navigation">
          <i class="fa fa-bars" aria-hidden="true"></i>
        </button>
        
        <a class="navbar-brand" href="/"><span class="logo">{C.H}</span></a>
        
        <div class="collapse navbar-collapse" id="collapseNavbar">
          <div class="nav navbar-nav ml-auto">
            <a id="blog-link" class="nav-item nav-link" href="/blog/">Blog</a>
            
            
              
                
                
                
                  <a id="projects-link" class="nav-item nav-link" href="/projects/">Projects</a>
                
              
            
              
                
                
                
                  <a id="experiences-link" class="nav-item nav-link" href="/experience/">Experience</a>
                
              
            
          </div>
        </div>
      </nav>
    </div>
  </div>
</header>

    <main class="site-content" aria-label="Content">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="header">
    <div class="header-content">
        <h1 class="title" itemprop="name headline">A C# Developer's Intro to F#</h1>
        
            <div class="content description">
                A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory.
            </div>
        
        
        
            <div class="content">
                <time datetime="2017-04-10T14:00:00+01:00" itemprop="datePublished">
                    <i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;<span class="date">10/04/2017</span>
                </time>
            </div>
            <div class="content">
                <i class="fa fa-clock-o" aria-hidden="true"></i>&nbsp;Read in about 26  minutes
            </div>
        
        
        
            <div class="content">
                
<a href="/language/f-sharp"><span class="tag"><i class="fa fa-code" aria-hidden="true"></i>&nbsp;F#</span></a>

<a href="/language/c-sharp"><span class="tag"><i class="fa fa-code" aria-hidden="true"></i>&nbsp;C#</span></a>


            </div>
        
        
    </div>
</header>
  <div class="post-body">
    <div class="post-toc">
      <h3 class="toc-title">Contents</h3>
      <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#introduction">Introduction</a></li>
<li class="toc-entry toc-h1"><a href="#why-f">Why F#?</a></li>
<li class="toc-entry toc-h1"><a href="#projects">Projects</a></li>
<li class="toc-entry toc-h1"><a href="#modules">Modules</a></li>
<li class="toc-entry toc-h1"><a href="#functions">Functions</a></li>
<li class="toc-entry toc-h1"><a href="#type-inference">Type Inference</a></li>
<li class="toc-entry toc-h1"><a href="#generics">Generics</a></li>
<li class="toc-entry toc-h1"><a href="#tuples">Tuples</a></li>
<li class="toc-entry toc-h1"><a href="#records">Records</a></li>
<li class="toc-entry toc-h1"><a href="#equality">Equality</a></li>
<li class="toc-entry toc-h1"><a href="#unit">Unit</a></li>
<li class="toc-entry toc-h1"><a href="#if-expression">If Expression</a></li>
<li class="toc-entry toc-h1"><a href="#function-signatures">Function Signatures</a></li>
<li class="toc-entry toc-h1"><a href="#currying">Currying</a></li>
<li class="toc-entry toc-h1"><a href="#lists">Lists</a></li>
<li class="toc-entry toc-h1"><a href="#discriminated-unions">Discriminated Unions</a></li>
<li class="toc-entry toc-h1"><a href="#pattern-matching">Pattern Matching</a></li>
<li class="toc-entry toc-h1"><a href="#option-type">Option Type</a></li>
<li class="toc-entry toc-h1"><a href="#result-type">Result Type</a></li>
</ul>
    </div>
    <div class="post-content" itemprop="articleBody">
      <h1 id="introduction">Introduction</h1>
<p>There are a lot of guides out there that explain functional programming and F# but I think very few are aimed at “modern” C# developers that use <a target="_BLANK" href="https://msdn.microsoft.com/en-us/library/bb397947.aspx#Anchor_0">Linq</a> everyday and that are familiar with the <a target="_BLANK" href="https://msdn.microsoft.com/en-us/library/018hxwa8(v=vs.110).aspx">Action</a> and <a target="_BLANK" href="https://msdn.microsoft.com/en-us/library/bb549151(v=vs.110).aspx">Func</a> types.</p>

<p>In this guide we will walk through some of the basic aspects of writing code in F# from the point of view of a C# developer who is already familiar with some aspects of functional programming.</p>

<p>This guide also assumes you have Visual Studio 2017 installed.</p>

<h1 id="why-f">Why F#?</h1>
<p><em>This section is purely my opinion so feel free to <a href="#projects">skip</a> it to get stuck straight into F#.</em></p>

<p>Functional programming is gaining more and more traction in recent years. The chances are if you’re reading this article you’re already well aware of this. You only have to look at the features that have been dropping in C# in recent years to see that almost all of them were available in F# first.</p>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Year in F#</th>
      <th>Year in C#</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>C# is becoming more and more functional with every release, but to me it feels like its being built upon a foundation that was never designed to be this functional. There are numerous features baked into in the C# language that simply makes functional programming more difficult (e.g. lack of true type inference, lak of immutability, void return type, statements instead of expressions, reliance on interfaces, inheritance and polymorphism).</p>

<p>In my opinion, the rapid evolving state of C# to become more functional will eventually lead fragmentation in the C# world. It is quite foreseeable to imagine a scenario where a project is written in functional C# using new C# features and a new developer who is not accustomed to this way of working could come onto the project and start writing traditional OO code. There is absolutely nothing wrong with OOP, but if all the code is written in one way and then other parts are written in another quite different way, then the reasonably and consistency of the code is affected.</p>

<p>F# offers a clean line in the sand between OO and functional. If you’re working on an F# project you know the project you are working on is going to be written in a mostly functional manner. It is perfectly fine to write OO code in F# too, but its not the default way of doing things, so you’re less likely to revert back to that way of thinking unless it suites the problem you’re trying solve.</p>

<h1 id="projects">Projects</h1>
<p>Let’s start off by looking at how to create an F# project in Visual Studio:</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-new-solution.png" alt="Screenshot of Visual Studio when creating an F# solution" /></p>

<p>Setting the .NET framework version is done in the exact same way as you would a C# project. This article assumes it is set to 4.6.2.</p>

<p>There is one important difference between F# projects and C# projects. The order of the files in the solution explorer is not alphabetical in F# projects, it is actually in the order in which they are compiled. If file B uses a function in file A, then file B must be below file A.</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-solution-explorer.png" alt="Screenshot of Visual Studio solution explorer for an F# solution" /></p>

<p>Notice that because A was created after B it is in-fact under A (not in alphabetical order). If B wants to use anything in A then you have to move it up the list, this is done via the context menu or by pressing <code class="highlighter-rouge">ALT + Up/Down</code> when it is selected in the explorer.</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-solution-explorer-context-menu.png" alt="Screenshot of Visual Studio project item context menu for an F# solution" /></p>

<p>This caught me out for quite a long time when I created my first F# project, as Visual Studio just tells you that the thing you are trying to use is not declared yet. This may sound really horrible but in my experience it has never caused me an issue once a realised what was going on.</p>

<p>Another important thing to note is that there are no folders in F# projects, when needed, code is segregated using projects in a solution.</p>

<h1 id="modules">Modules</h1>
<p>Before we write our first function we need a container to put them in. In F# functions are put into <em>modules</em>. Think of modules as static classes. The only difference between modules and static classes is that you can import a module into your current file just like you would a namespace.</p>

<p>This leaves you with a two tier mechanism for organising code in F#: namespaces and modules.</p>

<table>
  <thead>
    <tr>
      <th>Container</th>
      <th>What can go in there</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Module</td>
      <td>Functions, Values (value type or complex type), Modules, Classes, Interfaces</td>
    </tr>
    <tr>
      <td>Namespace</td>
      <td>Modules, Classes, Interfaces</td>
    </tr>
  </tbody>
</table>

<p>Namespaces are the top level tier and modules are the lower level tier.</p>

<p>As mentioned previously, modules can be imported into a file in the exact same way a namespace can in F#. So, for example if you have:</p>
<ul>
  <li>A function called parse in a module called Maths.</li>
  <li>And Maths was in a namespace called Helpers.</li>
  <li>Then to use the function you can import “Helpers.Maths” into your file and use the parse function.</li>
</ul>

<p>To add a module to a project you use the “New Item…” context menu option, just as you would in a C# project. Somewhat confusingly there are two F# identical options in the dialogue box that appears:</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-add-new-file.png" alt="Screenshot of Visual Studio dialogue for adding a new F# file" /></p>

<p>Use the first one (the second one is a Xamarin Android file strangely enough).</p>

<p>Unfortunately if you’re a ReSharper user you’ll notice that they haven’t included any F# templates in the “New from Template” menu yet.</p>

<h1 id="functions">Functions</h1>
<p>Now we know what to put our function in, we are now ready to write our own function. Below is a simple add function in a module and namespace:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="n">namespace</span> <span class="nc">Helpers</span>

<span class="k">module</span> <span class="nc">Maths</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">add</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
        <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
</code></pre>
</div>

<p>Lets go through this one line at a time:</p>

<p><code class="highlighter-rouge">namespace Helpers</code> puts everything that is in this file into a namespace called <em>Helpers</em>.</p>

<p><code class="highlighter-rouge">module Maths =</code> creates a module called <em>Maths</em>. Here we see one of the biggest differences between C# and F#. F# is <strong>whitespace sensitive</strong>. Notice everything inside the module must be indented. Due to this there is no need for semi-colons.</p>

<p><code class="highlighter-rouge">let add num1 num2 =</code> declares a function. To declare any variable in F# the <strong>let</strong> keyword is used. F# values are <strong>immutable</strong> so using var (short for variable of course) does not make much sense. The next strange thing you will have noticed with this line is that there appears to be three values to the left of the equals sign. It is in-fact a single function. The first value is the name of the function (called <em>add</em>) and the second value is the first parameter to the function ( called <em>num1</em>) and the third value is the second parameter to the function (called <em>num2</em>).</p>

<p><code class="highlighter-rouge">num1 + num2</code> is the body of the function (notice how it is indented so the compiler knows it is part of the function declaration on the line above). There is no <strong>return</strong> keyword in the function body. This is because all functions in F# are single statement <strong>expressions</strong>. The C# equivalent to this is when you have a single statement lambda (the ones without curly braces). When you do this is C# you do not have to use the return keyword and it is the same here in F#.</p>

<p>Now we know our way around a function in F# we can take a look at the program file that is created for us by default in every F# Console project by Visual Studio.</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="p">[&lt;</span><span class="nc">EntryPoint</span><span class="p">&gt;]</span>
<span class="k">let</span> <span class="n">main</span> <span class="n">argv</span> <span class="p">=</span> 
    <span class="n">printfn</span> <span class="s2">"%A"</span> <span class="n">argv</span>
    <span class="mi">0</span> <span class="o">//</span> <span class="n">return</span> <span class="n">an</span> <span class="n">integer</span> <span class="n">exit</span> <span class="n">code</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">[&lt;EntryPoint&gt;]</code> is an F# attribute. The syntax is slightly different to C# where you only have the square brackets. This attribute is required for the main method in F#. The entry point in F# is important for two reasons:</p>
<ul>
  <li>Firstly it is the only file that does not need to be in a module or namespace</li>
  <li>Secondly it must be the last file to be compiled. This means it has to be at the bottom of the project in the solution explorer.</li>
</ul>

<p><code class="highlighter-rouge">let main argv =</code> is a function declaration that takes in the command line arguments as its only parameter.</p>

<p><code class="highlighter-rouge">printfn "%A" argv</code> writes the command line arguments to the console. <code class="highlighter-rouge">printfn</code> is much like Console.WriteLine combined with String.Format. Don’t worry too much what <em>%A</em> means for now, just know that it prints out a type’s values. You can find more about the formatting tokens available in the printfn function <a target="_BLANK" href="https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/core.printf-module-%5Bfsharp%5D#remarks">here</a>. We can also see the syntax for calling a function in F# on this line. Much like function declarations, parameters are separated by spaces with no need for commas and parenthesis. This line is almost equivalent to <code class="highlighter-rouge">Console.WriteLine(String.Format("{0}", argv))</code>.</p>

<p><code class="highlighter-rouge">0</code> - the last line looks kind of strange but what is does is it returns 0 to the operating system to indicate the system terminated without an error. Much like you do when using the Environment.Exit method.</p>

<h1 id="type-inference">Type Inference</h1>
<p>The add function in the previous example takes in two integers, adds them together and then returns the result. Not once in the file however, do we mention the int primitive type (or any other type for that matter). This is due to a powerful feature of F# called type inference. C# of course has its own type inference (for example the var keyword in C# infers the type being assigned to it). F#’s type inference on the other hand, is much more advanced.</p>

<p>The compiler will take a look at how the values are used in the function and then determine what the parameters and return type of the function should be.</p>

<p>Sometimes the compiler won’t be able to infer the types. When this happens you must use <strong>type annotations</strong>. For example if a function takes in a list and calls the Linq extension method called Any on it, the compiler will not be able to deduce the type. Take the following example:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">anyItems</span> <span class="n">items</span> <span class="p">=</span>
    <span class="n">items</span><span class="p">.</span><span class="nc">Any</span><span class="bp">()</span>
</code></pre>
</div>
<p>The example above will not compile and will result in the following error:</p>

<blockquote>
  <p>Lookup on object of indeterminate type based on information prior to this program point. <strong>A type annotation may be needed</strong> prior to this program point to constrain the type of the object. This may allow the lookup to be resolved.</p>
</blockquote>

<p>Type annotations are when you tell the compiler what the type of a parameter or return value is, just like you do in C# already. The following example uses a type annotation:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">open</span> <span class="nn">System</span><span class="p">.</span><span class="nc">Linq</span>
<span class="k">let</span> <span class="n">anyItems</span> <span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="n">seq</span><span class="p">&lt;</span><span class="kt">string</span><span class="o">&gt;)</span> <span class="p">=</span>
    <span class="n">items</span><span class="p">.</span><span class="nc">Any</span><span class="bp">()</span>
</code></pre>
</div>

<p>Note that we have <em>imported</em> the System.Linq namespace (in F# the keyword to import a namespace is <strong>open</strong> instead of <em>using</em> like in C#).</p>

<p>Type annotations have two parts to their syntax:</p>
<ul>
  <li>Firstly wrap the parameter in parenthesis</li>
  <li>Then place a colon inside the parenthesis
    <ul>
      <li>To the left of the colon is the name of the parameter</li>
      <li>To the right of the colon is the type of the parameter</li>
    </ul>
  </li>
</ul>

<p>This is the other way round to C# where the type comes before the name.</p>

<p>You’re also probably wondering what the <code class="highlighter-rouge">seq</code> type is. Seq is an alias for IEnumerable. It is short for sequence. I’m not quite sure why it is needed, but it is sure a lot easier to type than IEnumerable! I’ll cover the most common F# types later.</p>

<p>Member methods (especially generic extension methods) usually break type inference. In F# you tend to stick to having lots of static functions in modules that take in a type and then return a modified instance of it when it is finished. Following this pattern results in far fewer type annotations and cleaner code. We’ll see this in action later.</p>

<h1 id="generics">Generics</h1>
<p>Sometimes it doesn’t actually matter what the types of a function’s parameters or return value is. For example take the following F# code:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">returnSecondParameter</span> <span class="n">param1</span> <span class="n">param2</span> <span class="p">=</span>
    <span class="n">param2</span>
</code></pre>
</div>

<p>Now, I know this function is pretty useless but it demonstrates a particularly important aspect of F#. Since the compiler infers the types of the function’s parameters and return type do not matter, this function is compiled as a generic function. The equivalent C# code would be:</p>

<div class="language-csharp highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="n">TParam2</span> <span class="n">ReturnSecondParameter</span><span class="p">&lt;</span><span class="n">TParam1</span><span class="p">,</span> <span class="n">TParam2</span><span class="p">&gt;(</span><span class="n">TParam1</span> <span class="n">param1</span><span class="p">,</span> <span class="n">TParam2</span> <span class="n">param2</span><span class="p">)</span> <span class="p">=&gt;</span> 
    <span class="n">param2</span><span class="p">;</span>
</code></pre>
</div>

<p>The big difference here being, in C# you have to go out of your way to <em>opt in</em> to making a function generic. In F# however, you have to <em>opt out</em> to make the function non-generic by using type annotations. Leaving it generic is usually for the best, as if the function doesn’t need to be non-generic, why not open it up so it can be used with any type?</p>

<h1 id="tuples">Tuples</h1>
<p>If you’re keeping up to date with C# 7, then you will be aware of what tuples are. If you haven’t though, tuples are ordered groups of values. If you have a list of integers you can have 0 to N integers. Tuples allow you to create an object that contains a finite amount of different types. For example you could create a tuple that contains an integer then a string and then another integer.</p>

<p>One of the main uses for tuples is that they allow you to return multiple values from a function without having to create a small POCO class to contain them.</p>

<p>In F# tuples are written using parenthesis with the items inside separated by commas. Below is an example of a function that returns a tuple that contains an integer and then a string:</p>
<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTen</span> <span class="n">num</span> <span class="p">=</span>
    <span class="p">(</span><span class="n">num</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="s2">"The original value was "</span> <span class="o">+</span> <span class="n">num</span><span class="p">)</span>
</code></pre>
</div>

<p>The above example returns the value with ten added to it in the tuple’s first item, and a string containing the value in the tuple’s second item.</p>

<p>Tuples can also be “unpacked” when they are assigned to. Below is an example of how tuples are assigned to:</p>
<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">result</span><span class="p">,</span> <span class="n">message</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">20</span>
</code></pre>
</div>

<p>Unpacking tuples is optional. You can always unpack the tuple later. As demonstrated in this example:</p>
<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">resultAndMessage</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">20</span>
<span class="k">let</span> <span class="n">result</span><span class="p">,</span> <span class="n">message</span> <span class="p">=</span> <span class="n">resultAndMessage</span>
</code></pre>
</div>

<p>In the above examples, <em>result</em> contains the integer in the first item of the tuple and <em>message</em> contains the string in the second item of the tuple.</p>

<p>As you can see, using tuples is a very convenient way of returning multiple values from a function without having to create a small type and then extracting the values out of it. They also have another purpose in F# which we will cover later.</p>

<h1 id="records">Records</h1>
<p>Records are immutable POCO classes that offer value based equality for free (as opposed to the reference based equality you get by default in C#). Below is an example of a record declaration:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">type</span> <span class="nc">Person</span> <span class="p">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="kt">string</span>
    <span class="n">age</span><span class="p">:</span> <span class="kt">int</span>
<span class="p">}</span>
</code></pre>
</div>

<p>To instantiate a record the following syntax is used:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">person</span> <span class="p">=</span> <span class="p">{</span> 
    <span class="n">name</span> <span class="p">=</span> <span class="s2">"Connel"</span>
    <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span>
<span class="p">}</span>
</code></pre>
</div>

<p>The F# compiler infers the type for us. It looks through all the available types for any types that have both “name” and “age” properties. Since there is only one, the compiler can successfully infer the type of this object to that of a <em>Person</em> type. This is just one example of how F# type inference is head and shoulders above C#’s.</p>

<p>If you have two records with the same properties then you can use type annotations to tell the compiler which one to use, although this is very rare. If you have two records with the exact same properties you should probably merge them.</p>

<p>Since a record is a class it can be placed inside a namespace or module. One of the best features of records is how they are compared.</p>

<p>For example take the following F# code:</p>
<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">open</span> <span class="nc">System</span>

<span class="k">type</span> <span class="nc">Person</span> <span class="p">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="kt">string</span>
    <span class="n">age</span><span class="p">:</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="p">[&lt;</span><span class="nc">EntryPoint</span><span class="p">&gt;]</span>
<span class="k">let</span> <span class="n">main</span> <span class="n">argv</span> <span class="p">=</span> 
    <span class="k">let</span> <span class="n">person1</span> <span class="p">=</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s2">"Connel"</span><span class="p">;</span> <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span> <span class="p">}</span>
    <span class="k">let</span> <span class="n">person2</span> <span class="p">=</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s2">"Hooley"</span><span class="p">;</span> <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span> <span class="p">}</span>
    <span class="k">let</span> <span class="n">person3</span> <span class="p">=</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s2">"Connel"</span><span class="p">;</span> <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span> <span class="p">}</span>
    <span class="k">let</span> <span class="n">isPerson1Person2</span> <span class="p">=</span> <span class="n">person1</span> <span class="p">=</span> <span class="n">person2</span>
    <span class="k">let</span> <span class="n">isPerson1Person3</span> <span class="p">=</span> <span class="n">person1</span> <span class="p">=</span> <span class="n">person3</span>
    <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="n">isPerson1Person2</span><span class="p">)</span> <span class="o">//</span> <span class="n">prints</span> <span class="bp">false</span>
    <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="n">isPerson1Person3</span><span class="p">)</span> <span class="o">//</span> <span class="n">prints</span> <span class="bp">true</span>
    <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="s2">"Press enter to exit"</span><span class="p">)</span>
    <span class="k">let</span> <span class="k">value</span> <span class="p">=</span> <span class="nn">Console</span><span class="p">.</span><span class="nc">ReadLine</span><span class="bp">()</span>
    <span class="mi">0</span> <span class="o">//</span> <span class="n">return</span> <span class="n">an</span> <span class="n">integer</span> <span class="n">exit</span> <span class="n">code</span>
</code></pre>
</div>
<p>Here we have a main method that creates 3 Person objects. The first and second Person objects have a different name, whereas the first and third objects have the same properties. Notice how comparing person1 and person3 results in “True” being printed. This is because records check for equality on <strong>all</strong> of its properties. It does not perform a reference comparison like C# does. This is really useful for <strong>unit testing</strong>. It means we do not have to waste our time writing equals overloads to actual perform a valid comparison. The majority of the time we only care if the values in an object are equal and not the reference.</p>

<p>It is important to note that if a record contains another record as one of its properties then the comparison “crawls” down the object, it is not a shallow comparison. If a record contains a list, then every item in the list is compared to ensure the lists contain the same items. This can result in a performance drop so be mindful about this when you check if two complex records are equal.</p>

<p>Also note how the semi-colon is used the previous example to create a record on one line.</p>

<h1 id="equality">Equality</h1>
<p>You may also may have noticed in the previous example that in F# you only use a single equals for a comparison (as opposed to the double equals you will find in C#).</p>

<table>
  <thead>
    <tr>
      <th>When the equals symbol is used</th>
      <th>What is does</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Immediately after the let keyword and an identifier</td>
      <td>Assigns the following expression to the identifier</td>
    </tr>
    <tr>
      <td>Immediately after the module keyword and an identifier</td>
      <td>Assigns the any indented code below to the module</td>
    </tr>
    <tr>
      <td>In an expression</td>
      <td>Compares two values</td>
    </tr>
  </tbody>
</table>

<h1 id="unit">Unit</h1>
<p>As mentioned previously everything in F# is an expression. Functions that return void cannot be used in expressions. For example you cannot use functions that return void in ternary expressions in C#. For example, this C# code will not compile:</p>

<div class="language-csharp highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">args</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">0</span>
            <span class="p">?</span> <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
            <span class="p">:</span> <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"world"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>This is because expressions must have a return type. F# has a special type called <strong>Unit</strong>. Unit is an empty value. You cannot do anything with the unit type, but since it is an actual value (unlike void which is the absence of a value) you can use it in expressions. Any methods that return void in C#, such as Thread.Sleep and Console.WriteLine, return Unit when used in F#.</p>

<p>Unit is expressed in F# by using two brackets next to each other like this: <code class="highlighter-rouge">()</code>. It could be described as an empty tuple. Below is an example of an entirely pointless function that takes in unit returns unit.</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">returnUnit</span> <span class="bp">()</span> <span class="p">=</span> 
    <span class="bp">()</span>
</code></pre>
</div>
<p>If you ever want to disregard the returned value of a function and return unit instead, F# has a function called ignore that does this for you. For example Console.ReadLine returns a string but we want our function to return void, so we use the ignore function to <em>ignore</em> the string returned from the ReadLine method and return <em>Unit</em> instead.</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">waitUntilEnter</span> <span class="bp">()</span> <span class="p">=</span> 
    <span class="n">ignore</span> <span class="p">(</span><span class="nn">Console</span><span class="p">.</span><span class="nc">ReadLine</span><span class="bp">()</span><span class="p">)</span>
</code></pre>
</div>

<p>The waitUntilEnter function above returns the empty Unit type rather than the string returned by the ReadLine method.</p>

<h1 id="if-expression">If Expression</h1>

<p>F# does not have a ternary operator, since everything is already an expression in F#. The F# equivalent to the C# ternary operator is the if expression.</p>

<p>When using an if expression, all the branches of the expression must return the same type.</p>

<p>For example:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">module</span> <span class="nc">Helpers</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">isConnel</span> <span class="n">x</span> <span class="p">=</span>
        <span class="k">if</span> <span class="n">x</span> <span class="p">=</span> <span class="s2">"Connel"</span> <span class="k">then</span>
            <span class="s2">"The value is Connel"</span>
        <span class="k">else</span>
            <span class="s2">"The value is not Connel"</span>
</code></pre>
</div>

<p>Like everything in F#, the if expression is whitespace sensitive so there is no need for curly braces. The other main difference compared to C# is that there is no need to parenthesis around the condition and there is an additional <em>then</em> keyword required.</p>

<p>Both parts of the expression above returns a string. If the else branch returned a boolean for example, the code would not compile.</p>

<h1 id="function-signatures">Function Signatures</h1>
<p>In C# method signatures look this (see <a target="_BLANK" href="http://stackoverflow.com/a/8808773/310098">here</a> for why I’ve included the return type if you’re curious):</p>

<blockquote>
  <p>int Add(int, int)</p>
</blockquote>

<p>Or, if you wanted to take in a method that followed this notation as a parameter, you would need to take in an object of the type:</p>

<blockquote>
  <p>Func&lt;int, int, int&gt;</p>
</blockquote>

<p>F# has its own notation for a method’s signature. The add function above has the following signature in F#:</p>

<blockquote>
  <p>int -&gt; int -&gt; int</p>
</blockquote>

<p>This F# signature appears to closely resemble the corresponding Func type in C#. The item on the far right is the return type, and the items to its left are the values you need to put in to get that return type out.</p>

<p>One of the nice things about F# is that a function’s signature is also its type, it isn’t two different things like in C#.</p>

<p>Asterisks are used to denote tuples. The following example is the signature of a function that takes in an integer and returns a tuple with an integer as its first item and a string as its second item.</p>

<blockquote>
  <p>int -&gt; int * string</p>
</blockquote>

<p>Take the following following F# function:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">doubleWhenTrue</span> <span class="n">num</span> <span class="n">predicate</span> <span class="p">=</span>
    <span class="k">if</span><span class="p">(</span><span class="n">predicate</span><span class="p">(</span><span class="n">num</span><span class="o">))</span> <span class="k">then</span>
        <span class="n">num</span><span class="p">*</span><span class="mi">2</span>
    <span class="k">else</span>
        <span class="n">num</span>
</code></pre>
</div>

<p>The example above is a function that takes in another function as a parameter. The notion/type for this function is:</p>

<blockquote>
  <p>int -&gt; (int -&gt; bool) -&gt; int</p>
</blockquote>

<p>Parenthesis are used to indicate the nested function that is a parameter. Parenthesis are also used to indicate a function that is returned. Take the following F# function:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">add</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">sum</span> <span class="p">=</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
    <span class="k">let</span> <span class="n">returnFunction</span> <span class="n">num</span> <span class="p">=</span> 
        <span class="n">sum</span> <span class="o">+</span> <span class="n">num</span>
    <span class="n">returnFunction</span>
</code></pre>
</div>

<p>The example above is a function takes in two integers, adds them together and then returns another function that takes in another int and adds it to the sum of the previous two integers and returns the result. The notion/type for this function is:</p>

<p>int -&gt; int -&gt; (int -&gt; int)</p>

<h1 id="currying">Currying</h1>
<p>One of the powerful features of F# that differentiates it from C# is its built currying. Currying is when you split a function of N parameters into N separate functions. For example, if you take the following C# function type:</p>

<blockquote>
  <p>Func&lt;int, int, int, int&gt;</p>
</blockquote>

<p>Calling a function of this type would look like this: <code class="highlighter-rouge">int sum = addThreeNumbers(1,2,3);</code></p>

<p>If you were to <strong>curry</strong> it, you would end up with a function of the following function type:</p>

<blockquote>
  <p>Func&lt;int, Func&lt;int, Func&lt;int, int&gt;&gt;&gt;</p>
</blockquote>

<p>Calling this function would look like this: <code class="highlighter-rouge">int sum addThreeNumbersCurried(1)(2)(3);</code></p>

<p>This generic function type is pretty confusing and long, and this is a major reason why F# (and functional programming in general) leans heavily on type inference.</p>

<p>In F# all functions are curried by default. For example take the following F# function:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTwoNumbers</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
    <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
</code></pre>
</div>

<p>The above function takes in two parameters and adds them together. In F# can actually call this function with just one parameter. Since the function is curried it returns a function that takes in a single integer and a returns an integer.</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTen</span> <span class="p">=</span> <span class="n">addTwoNumbers</span> <span class="mi">10</span>
<span class="k">let</span> <span class="n">twelve</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">2</span>
<span class="k">let</span> <span class="n">fifteen</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">5</span>
</code></pre>
</div>

<p>Calling a function without all of its parameters is called a <strong>partial function application</strong>. Due to F#’s built in currying, it is not possible to overload a function in F#. For example the following interface is perfectly valid in C#:</p>

<div class="language-csharp highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="n">IMathsHelpers</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="nf">Add</span><span class="p">(</span><span class="kt">int</span> <span class="n">num1</span><span class="p">);</span>
    <span class="kt">int</span> <span class="nf">Add</span><span class="p">(</span><span class="kt">int</span> <span class="n">num1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>
<p>In C#, the compiler knows if you only provide one integer that it should call the first method and if you provide two then it should call the second method. In F# however, the compiler would not know whether you wanted to call the first method or <strong>partial apply</strong> the second method.</p>

<p>If you want to prevent a function from being partially applied, you can group together the inputs via a tuple. Since a tuple is a single value you must give all of the items inside the tuple at the same time. For example take the following F# method:</p>

<div class="language-ocaml highlighter-rouge"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTwoNumbersTuple</span> <span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="o">)=</span>
    <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
</code></pre>
</div>

<p>This function takes a single tuple as its only parameter, instead of taking two separate integer values. The signature of this function is:</p>

<blockquote>
  <p>int * int -&gt; int</p>
</blockquote>

<p>As you can see there is only one arrow in the function type signature. An arrow indicates where a function type can be partially applied. The following would not compile as you need to provide the entire tuple: <code class="highlighter-rouge">let addFive = addTwoNumbersTuple 5</code></p>

<p>Method overloads from C# types are still available in F#. Any function created outside of F# in .NET is exposed to an F# project as a function that has a single tuple as its input type. This means you cannot partially apply a function created outside of F# as this would break the existing overloaded functions. For example String.Format has the following overloaded signatures:</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-string-format-overloads.png" alt="Screenshot of String.Format overloads in an F# project" /></p>

<h1 id="lists">Lists</h1>
<p>TODO</p>

<h1 id="discriminated-unions">Discriminated Unions</h1>
<p>TODO</p>

<h1 id="pattern-matching">Pattern Matching</h1>
<p>TODO</p>

<h1 id="option-type">Option Type</h1>
<p>TODO</p>

<h1 id="result-type">Result Type</h1>
<p>TODO</p>

<p>#Lambdas
TODO</p>


    </div>
  </div>
  
  <div class="post-comments">
    <div class="post-comments-content">
      

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://connelhooley.uk/blog/2017/04/10/f-sharp-intro';
      this.page.identifier = 'http://connelhooley.uk/blog/2017/04/10/f-sharp-intro';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://connelhooley.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


    </div>
  </div>
  
</article>

    </main>
    <footer class="site-footer">
    <div class="copy">
        Connel Hooley <i class="fa fa-copyright" aria-hidden="true"></i> 2017
    </div>
    <div class="built-with">
        <a href="http://jekyllrb.com/" target="_blank">Built with Jekyll</a>
    </div>
</footer>
<script src="/assets/js/jquery-3.1.1.min.js"></script>
<script src="/assets/js/tether.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/moment.min.js"></script>
<script src="/assets/js/clipboard.min.js"></script>
<script src="/assets/js/main.js"></script>
  </body>
</html>