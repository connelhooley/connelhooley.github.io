<html lang=" en ">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Connel Hooley - A C# Developer&#39;s Guide to F#</title>
    
    <link rel="stylesheet" href="/assets/css/vendor/normalize.css">
    <link rel="stylesheet" href="/assets/css/vendor/stickyfill.css">
    <link rel="stylesheet" href="/assets/css/site.css">
    
    <link rel="alternate" type="application/rss+xml" title="Connel Hooley" href="/feed.xml">  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#f8bb15">
    <meta name="theme-color" content="#f8bb15">
    
    
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="A C# Developer’s Guide to F#" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory." />
<meta property="og:description" content="A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory." />
<link rel="canonical" href="http://connelhooley.uk/blog/2017/04/10/f-sharp-guide" />
<meta property="og:url" content="http://connelhooley.uk/blog/2017/04/10/f-sharp-guide" />
<meta property="og:site_name" content="Connel Hooley" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-04-10T14:00:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@connel_dev" />
<meta name="twitter:creator" content="@connel_dev" />
<script type="application/ld+json">
{"description":"A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory.","@type":"BlogPosting","url":"http://connelhooley.uk/blog/2017/04/10/f-sharp-guide","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://connelhooley.uk/assets/images/logo.png"}},"headline":"A C# Developer’s Guide to F#","dateModified":"2017-04-10T14:00:00+01:00","datePublished":"2017-04-10T14:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://connelhooley.uk/blog/2017/04/10/f-sharp-guide"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    
    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57397582-1', 'auto');
  ga('send', 'pageview');

</script>

</head>
<body id="layout-post">
    
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.12';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <div id="site-header-bar">
    <div id="site-header-bar-inner">
        <div id="site-nav">
            <a id="site-logo" href="/">{C.H}</a>
            <button id="site-nav-mobile-toggler"><i class="fas fa-bars"></i></button>
        </div>
        <nav id="site-nav-links">
            <a class="site-nav-item site-nav-item-post site-nav-item-active" href="/blog/">Blog</a>
            
            
                
                
                
                <a class="site-nav-item site-nav-item-projects" href="/projects/">Projects</a>
                
            
                
                
                
                <a class="site-nav-item site-nav-item-experiences" href="/experience/">Experience</a>
                
            
        </nav>
    </div>
</div>
<main id="site-main">
    <article>
    <header id="post-header">
        <div id="post-header-inner">
            <h1 id="post-header-title" class="post-header-item" itemprop="name headline">A C# Developer's Guide to F#</h1>
            
            <div id="post-header-description" class="post-header-item">
                A brief introduction to F# from the point of view of a C# developer. This guide aims to get stuck straight into F# without too much functional theory.
            </div>
            
            
            <div id="post-header-published" class="post-header-item">
                <time datetime="2017-04-10T14:00:00+01:00" itemprop="date">
                    <date class="date" datetime="2017-04-10 14:00:00 +0100"><i class="far fa-calendar-alt"></i>&nbsp;10/04/2017</date>
                </time>
            </div>
            
            
            <div id="post-header-reading-time" class="post-header-item">
                <i class="far fa-clock"></i>&nbsp;Read in under 57  minutes
            </div>
            
            
            
            
            <div id="post-header-meta" class="post-header-item">
                
<span class="meta-item"><i class="fas fa-code"></i>&nbsp;F#</span>

<span class="meta-item"><i class="fas fa-code"></i>&nbsp;C#</span>


            </div>
            
        </div>
    </header>
    
    
    
    
    <div id="post-toolbar" class="sticky">
        <div id="post-toolbar-inner">
            <div id="post-toolbar-buttons">
                <div id="post-toolbar-share-buttons">
                    <span id="post-toolbar-share-buttons-label"><i class="fas fa-share-alt fa-fw"></i>&nbsp;<span class="post-toolbar-button-label">Share&nbsp;</span></span>
                    <a class="post-toolbar-button" target="_BLANK" href="https://twitter.com/intent/tweet?text=A+C%23+Developer%27s+Guide+to+F%23+by+%40connel_dev&url=http%3A%2F%2Fconnelhooley.uk%2Fblog%2F2017%2F04%2F10%2Ff-sharp-guide"><i class="fab fa-twitter-square fa-fw"></i><span class="post-toolbar-button-label">&nbsp;Twitter</span></a>
                    <a class="post-toolbar-button" target="_BLANK" href="//www.reddit.com/submit?url=http%3A%2F%2Fconnelhooley.uk%2Fblog%2F2017%2F04%2F10%2Ff-sharp-guide&title=A+C%23+Developer%27s+Guide+to+F%23"><i class="fab fa-reddit-square fa-fw"></i><span class="post-toolbar-button-label">&nbsp;Reddit</span></a>
                    <a class="post-toolbar-button" target="_BLANK" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fconnelhooley.uk%2Fblog%2F2017%2F04%2F10%2Ff-sharp-guide&title=A+C%23+Developer%27s+Guide+to+F%23"><i class="fab fa-linkedin fa-fw"></i><span class="post-toolbar-button-label">&nbsp;LinkedIn</span></a>
                </div>
                <div id="post-toolbar-scroll-buttons">
                    <button id="post-toolbar-button-back-to-top" class="post-toolbar-button"><i class="fas fa-arrow-up fa-fw"></i><span class="post-toolbar-button-label">&nbsp;Back to top</span></button>
                    <a class="post-toolbar-button" href="#comments"><i class="fas fa-comments fa-fw"></i><span class="post-toolbar-button-label">&nbsp;Comments</span></a>
                </div>
            </div>
        </div>
    </div>
    <div id="post-body">
        <div id="post-body-inner">
            <nav id="post-toc">
                <div id="post-toc-title">Contents</div>
                <div id="post-toc-items"><ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#introduction">Introduction</a></li>
<li class="toc-entry toc-h1"><a href="#why-f">Why F#?</a></li>
<li class="toc-entry toc-h1"><a href="#projects">Projects</a></li>
<li class="toc-entry toc-h1"><a href="#modules">Modules</a></li>
<li class="toc-entry toc-h1"><a href="#functions">Functions</a></li>
<li class="toc-entry toc-h1"><a href="#type-inference">Type Inference</a></li>
<li class="toc-entry toc-h1"><a href="#generics">Generics</a></li>
<li class="toc-entry toc-h1"><a href="#equality">Equality</a></li>
<li class="toc-entry toc-h1"><a href="#mutability">Mutability</a></li>
<li class="toc-entry toc-h1"><a href="#tuples">Tuples</a></li>
<li class="toc-entry toc-h1"><a href="#unit">Unit</a></li>
<li class="toc-entry toc-h1"><a href="#records">Records</a></li>
<li class="toc-entry toc-h1"><a href="#if-expression">If Expression</a></li>
<li class="toc-entry toc-h1"><a href="#let-expression">Let Expression</a></li>
<li class="toc-entry toc-h1"><a href="#function-signatures">Function Signatures</a></li>
<li class="toc-entry toc-h1"><a href="#currying">Currying</a></li>
<li class="toc-entry toc-h1"><a href="#lambdas">Lambdas</a></li>
<li class="toc-entry toc-h1"><a href="#discriminated-unions">Discriminated Unions</a></li>
<li class="toc-entry toc-h1"><a href="#match-expression-pattern-matching">Match Expression (Pattern Matching)</a></li>
<li class="toc-entry toc-h1"><a href="#exceptions">Exceptions</a></li>
<li class="toc-entry toc-h1"><a href="#try-expression">Try Expression</a></li>
<li class="toc-entry toc-h1"><a href="#collection-types">Collection Types</a></li>
<li class="toc-entry toc-h1"><a href="#pipe-operator">Pipe Operator</a></li>
<li class="toc-entry toc-h1"><a href="#option-type">Option Type</a></li>
</ul></div>
            </nav>
            <div id="post-content" itemprop="articleBody">
                <h1 id="introduction">Introduction</h1>
<p>There is a lot of information on the web regarding functional programming and F#, but I think very few articles are aimed at “modern” C# developers that use <a target="_BLANK" href="https://msdn.microsoft.com/en-us/library/bb397947.aspx#Anchor_0">Linq</a> everyday and that are familiar with the <a target="_BLANK" href="https://msdn.microsoft.com/en-us/library/018hxwa8(v=vs.110).aspx">Action</a> and <a target="_BLANK" href="https://msdn.microsoft.com/en-us/library/bb549151(v=vs.110).aspx">Func</a> types.</p>

<p>In this guide we will walk through some of the basic aspects of writing code in F# from the point of view of a C# developer who is already familiar with some aspects of functional programming.</p>

<h1 id="why-f">Why F#?</h1>
<p><em>This section is purely my opinion so feel free to <a href="#projects">skip it</a> and get stuck straight into F#.</em></p>

<p>Functional programming has been gaining more and more traction in recent years. The chances are if you’re reading this article you’re already well aware of this. You only have to look at the features that have been arriving in C# in recent years to see that almost all of them were available (or had alternatives) in F# first.</p>

<p>C# 7:</p>
<ul>
  <li>Pattern matching (very basic)</li>
  <li>Tuples</li>
  <li>Deconstruction</li>
  <li>Local functions</li>
</ul>

<p>C# 6:</p>
<ul>
  <li>Import of static type members into namespace</li>
  <li>Exception filters</li>
</ul>

<p>C# is becoming more and more functional with every release, but to me it feels like its being built upon a foundation that was never designed to be this functional. There are numerous features baked into the C# language that simply makes functional programming more difficult:</p>

<ul>
  <li>Lack of true type inference</li>
  <li>Lack of immutability</li>
  <li>The void return type</li>
  <li>Statements instead of expressions</li>
  <li>Reliance on interfaces, inheritance and polymorphism</li>
</ul>

<p>In my opinion, C#’s rapid evolution to become more functional will eventually lead fragmentation in the C# world. It’s quite foreseeable to imagine a scenario where a project is written in an entirely functional manner in C# (using new future C# features). When a new developer (who is not accustomed to this way of working) joins the team, then that developer could find the code base difficult to understand and then and start writing traditional OO code. There is absolutely nothing wrong with OOP, but if all the code is written in one way and then other parts are written in another quite different way, then the reasonability and consistency of the code is affected.</p>

<p>F# offers a clean line in the sand between OO and functional. When working on an F# codebase you know the project you are working on is going to be written in a mostly functional manner. It is perfectly fine to write OO code in F# too, but its not the default way of doing things, so you’re less likely to revert back to that way of thinking unless it suites the problem you’re trying solve.</p>

<h1 id="projects">Projects</h1>
<p>Let’s start off by looking at how to create an F# project in Visual Studio:</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-new-solution.png" alt="Screenshot of Visual Studio when creating an F# solution" /></p>

<p>There is one important difference between F# and C# projects you should know about. The order of the files in the solution explorer is not alphabetical in F# projects, it is actually in the order in which they are compiled. If file B uses a function in file A, then file B must be below file A.</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-solution-explorer.png" alt="Screenshot of Visual Studio solution explorer for an F# solution" /></p>

<p>Notice that because A was created after B, A is in-fact under B (not in alphabetical order). If B wants to use anything in A then you have to move it up the list, this is done via the context menu or by pressing <code class="highlighter-rouge">ALT + Up/Down</code> when it is selected in the explorer.</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-solution-explorer-context-menu.png" alt="Screenshot of Visual Studio project item context menu for an F# solution" /></p>

<p>This caught me out for quite a long time when I created my first F# project, as Visual Studio just tells you that the thing you are trying to use is not declared yet. This may sound really horrible but in my experience it has never caused me an issue once I realised what was going on.</p>

<p>Another important thing to note is that there are no folders in F# projects, when needed, code is segregated using projects in a solution.</p>

<p><code class="highlighter-rouge">EDIT:</code> F# <em>does</em> have support for folders in the language itself, but adding folders is currently unavailable from Visual Studio. The latest preview version of VS2017 (version 26412.01, you can find it <a target="_BLANK" href="https://www.visualstudio.com/en-us/news/releasenotes/vs2017-preview-relnotes#fsharp">here</a>) claims that it includes the ability in F# to “Move Up/Move Down on Solution folder nodes”. I have tried this preview version and there is still no visible and obvious way to create folders in a project. I have also tried using the “add existing item” context menu option after creating a folder with an F# file inside it, but VS copies the file to the project folder. F# projects do not have a “show all files” button so that’s not an option either.</p>

<p>There is also an extension for VS2015 that gives you extra F# features called <a target="_BLANK" href="https://marketplace.visualstudio.com/items?itemName=FSharpSoftwareFoundation.VisualFPowerTools">Visual F# Power Tools</a>. This extension does have support for folders as described <a target="_BLANK" href="https://fsprojects.github.io/VisualFSharpPowerTools/folderorganization.html">here</a>. It must be noted however that even the makers of this extension disable folder support by default and state: “Because there are known issues with F# Project System in Visual F# Tools, folder organization may not work 100% correctly in all cases”. The extension itself is also now deprecated, as stated on its <a target="_BLANK" href="https://github.com/fsprojects/VisualFSharpPowerTools">GitHub page</a>: “This project is deprecated. All the functionality is being ported to Visual F# Tools, Visual Studio 2017 only”.</p>

<p>So, whilst it is true that the F# language does have support for folders, the F# tooling in Visual Studio does not - yet. It is probably possible to have folders in other development environments (like <a target="_BLANK" href="http://ionide.io">Ionide</a>) but since this article is aimed at existing C# developers, I won’t be covering that here. I would personally avoid them anyway, as it just adds another layer of complexity to the ordering of files.</p>

<h1 id="modules">Modules</h1>
<p>Before you can write your first function you need a container to put them in. In F# functions are put into <em>modules</em>. Think of modules as static classes. The only difference between modules and static classes is that you can import a module into your current file just like you would a namespace.</p>

<p>This leaves you with a two tier mechanism for organising code in F#: namespaces and modules.</p>

<table>
  <thead>
    <tr>
      <th>Container</th>
      <th>What can go in there</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Module</td>
      <td>Functions, Values (value type or complex type), Modules, Classes, Interfaces</td>
    </tr>
    <tr>
      <td>Namespace</td>
      <td>Modules, Classes, Interfaces</td>
    </tr>
  </tbody>
</table>

<p>Namespaces are the top level tier and modules are the lower level tier.</p>

<p>As mentioned previously, modules can be imported into a file in the exact same way a namespace can in F#. So, for example if you have:</p>
<ul>
  <li>A function called parse in a module called Maths.</li>
  <li>And Maths was in a namespace called Helpers.</li>
  <li>Then to use the function you can import “Helpers.Maths” into your file and use the parse function.</li>
</ul>

<p>To add a module to an F# project use the “New Item…” context menu option, just as you would to add a class to a C# project. Somewhat confusingly there are two F# identical options in the dialogue box that appears:</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-add-new-file.png" alt="Screenshot of Visual Studio dialogue for adding a new F# file" /></p>

<p>Use the first one (the second one is a Xamarin Android file).</p>

<p>Unfortunately if you’re a ReSharper user you’ll notice that they haven’t included any F# templates in the “New from Template” menu yet.</p>

<h1 id="functions">Functions</h1>
<p>Now we know what to put our function inside of, we are now ready to write our own function. Below is a simple add function put inside in a module and a namespace:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="nc">Helpers</span>

<span class="k">module</span> <span class="nc">Maths</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">add</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
        <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
</code></pre></div></div>

<p>Lets go through this one line at a time:</p>

<p><code class="highlighter-rouge">namespace Helpers</code> puts everything that is in this file into a namespace called <em>Helpers</em>.</p>

<p><code class="highlighter-rouge">module Maths =</code> creates a module called <em>Maths</em>. Here we see one of the biggest differences between C# and F#. F# is <strong>whitespace sensitive</strong>. Notice everything inside the module is indented. Due to this there is no need for semi-colons or curly braces.</p>

<p><code class="highlighter-rouge">let add num1 num2 =</code> declares a function. To declare any variable in F# the <strong>let</strong> keyword is used. F# values are <strong>immutable</strong> so using var (short for variable of course) does not make much sense. The next strange thing you will have noticed with this line is that there appears to be three values to the left of the equals sign. It is in-fact a single function. The first value is the name of the function (called <em>add</em>), the second value is the first parameter to the function ( called <em>num1</em>) and the third value is the second parameter to the function (called <em>num2</em>).</p>

<p><code class="highlighter-rouge">num1 + num2</code> is the body of the function (notice how it is indented so the compiler knows it is part of the function declaration on the line above). There is no <strong>return</strong> keyword in the function body. This is because all functions in F# are single statement <strong>expressions</strong>. The C# equivalent to this is when you have a single statement lambda (the ones without curly braces). When you do this in C# you do not have to use the return keyword and it is the same here in F#.</p>

<p>Now we know our way around a function in F# we can take a look at the program file that is created for us by default in F# console projects.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[&lt;</span><span class="nc">EntryPoint</span><span class="p">&gt;]</span>
<span class="k">let</span> <span class="n">main</span> <span class="n">argv</span> <span class="p">=</span> 
    <span class="n">printfn</span> <span class="s2">"%A"</span> <span class="n">argv</span>
    <span class="mi">0</span> <span class="c1">// return an integer exit code</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">[&lt;EntryPoint&gt;]</code> is an F# attribute. The syntax is slightly different to C# where you only have the square brackets. This attribute is required for the main method in F#. The entry point in F# is important for two reasons:</p>
<ul>
  <li>Firstly it is the only file that does not need to be in a module or namespace</li>
  <li>Secondly it must be the last file to be compiled. This means it has to be at the bottom of the project in the solution explorer.</li>
</ul>

<p><code class="highlighter-rouge">let main argv =</code> is a function declaration that takes in the command line arguments as its only parameter.</p>

<p><code class="highlighter-rouge">printfn "%A" argv</code> writes the command line arguments to the console. <code class="highlighter-rouge">printfn</code> is much like Console.WriteLine combined with String.Format. Don’t worry too much what <em>%A</em> means for now, just know that it prints out a type’s values. You can find more about the formatting tokens available in the printfn function <a target="_BLANK" href="https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/core.printf-module-%5Bfsharp%5D#remarks">here</a>. We can also see the syntax for calling a function in F# on this line. Much like function declarations, parameters are separated by spaces with no need for commas and parenthesis. This line is almost equivalent to <code class="highlighter-rouge">Console.WriteLine(String.Format("{0}", argv))</code>.</p>

<p><code class="highlighter-rouge">0</code> - the last line looks kind of strange but what is does is it returns 0 to the operating system to indicate the system terminated without an error. Much like you do when using the <code class="highlighter-rouge">Environment.Exit</code> method.</p>

<p>Functions can contain their own nested functions. This tends to be how you scope functions in F#, as opposed to making methods public, private or protected like in C#.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">printSignedIn</span> <span class="n">username</span>  <span class="p">=</span>
    <span class="k">let</span> <span class="n">print</span> <span class="n">m</span> <span class="p">=</span>
        <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="nn">DateTime</span><span class="p">.</span><span class="nn">Now</span><span class="p">.</span><span class="nc">ToShortDateString</span><span class="bp">()</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span>
    <span class="n">print</span> <span class="s2">"Welcome"</span>
    <span class="n">print</span> <span class="p">(</span><span class="s2">"You have successfully as "</span> <span class="o">+</span> <span class="n">username</span><span class="p">)</span>
</code></pre></div></div>

<p>In the example above, the inner <code class="highlighter-rouge">print</code> function is only available inside the <code class="highlighter-rouge">printSignedIn</code> function. Indentation is again used to denote the contents of the inner function.</p>

<h1 id="type-inference">Type Inference</h1>
<p>The add function in the previous section takes in two integers, adds them together and then returns the result. Not once in that function however, do we mention the int primitive type (or any other type for that matter). This is due to a powerful feature in F# called type inference. C# of course has its own type inference. For example the <code class="highlighter-rouge">var</code> keyword in C# <em>infers</em> the type being assigned to a variable. F#’s type inference on the other hand, is much more advanced.</p>

<p>The compiler will take a look at how the values are used in a function and then determine what the parameters and return type of the function should be.</p>

<p>Sometimes the compiler won’t be able to infer the types. When this happens you must use <strong>type annotations</strong>. For example if a function takes in a list and calls the Linq extension method called Any on it, the compiler will not be able to deduce the type. Take the following example:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">anyItems</span> <span class="n">items</span> <span class="p">=</span>
    <span class="n">items</span><span class="p">.</span><span class="nc">Any</span><span class="bp">()</span>
</code></pre></div></div>
<p>The example above will not compile and will result in the following error:</p>

<blockquote>
  <p>Lookup on object of indeterminate type based on information prior to this program point. <strong>A type annotation may be needed</strong> prior to this program point to constrain the type of the object. This may allow the lookup to be resolved.</p>
</blockquote>

<p>Type annotations are when you tell the compiler what the type of a parameter or return value is, just like you do in C# already. The following example uses a type annotation:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">open</span> <span class="nn">System</span><span class="p">.</span><span class="nc">Linq</span>
<span class="k">let</span> <span class="n">anyItems</span> <span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="n">seq</span><span class="p">&lt;</span><span class="kt">string</span><span class="o">&gt;)</span> <span class="p">=</span>
    <span class="n">items</span><span class="p">.</span><span class="nc">Any</span><span class="bp">()</span>
</code></pre></div></div>

<p>In the example above we have <em>imported</em> the System.Linq namespace. In F# the keyword to import a namespace or module is <code class="highlighter-rouge">open</code> instead of <code class="highlighter-rouge">using</code> like in C#.</p>

<p>Type annotations have two parts to their syntax:</p>
<ul>
  <li>Firstly wrap the parameter in parenthesis</li>
  <li>Then place a colon inside the parenthesis
    <ul>
      <li>To the left of the colon is the name of the parameter</li>
      <li>To the right of the colon is the type of the parameter</li>
    </ul>
  </li>
</ul>

<p>This is the other way round to C# where the type comes before the name.</p>

<p>You’re also probably wondering what the <code class="highlighter-rouge">seq</code> type is. Seq is an alias for IEnumerable. It is short for sequence. I’m not quite sure why it is needed, but it sure is a lot easier to type than IEnumerable! We briefly cover collections <a href="#collection-types">later</a>.</p>

<p>Member methods (especially extension methods on generic types) usually break type inference. In F# you tend to stick to having lots of static functions in modules that take in a type and then return a modified instance of it when it is finished. Following this pattern results in far fewer type annotations and cleaner code. We’ll see this in action later when we cover <a href="#pipe-operator">piping</a>.</p>

<h1 id="generics">Generics</h1>
<p>Sometimes it doesn’t actually matter what the types of a function’s parameters or return value is. For example take the following F# code:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">returnSecondParameter</span> <span class="n">param1</span> <span class="n">param2</span> <span class="p">=</span>
    <span class="n">param2</span>
</code></pre></div></div>

<p>Now, I know this function is pretty useless but it demonstrates a particularly important aspect of F#. Since the compiler infers the types of the function’s parameters and return type do not matter, this function is compiled as a generic function. The equivalent C# code would be:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="n">TParam2</span> <span class="n">ReturnSecondParameter</span><span class="p">&lt;</span><span class="n">TParam1</span><span class="p">,</span> <span class="n">TParam2</span><span class="p">&gt;(</span><span class="n">TParam1</span> <span class="n">param1</span><span class="p">,</span> <span class="n">TParam2</span> <span class="n">param2</span><span class="p">)</span> <span class="p">=&gt;</span> 
    <span class="n">param2</span><span class="p">;</span>
</code></pre></div></div>

<p>The big difference here being, in C# you have to go out of your way to <em>opt in</em> to making a function generic. In F# however, you have to <em>opt out</em> to make the function non-generic by using type annotations. Leaving it generic is usually for the best, as if the function doesn’t need to be non-generic, why not open it up so it can be used with any type?</p>

<h1 id="equality">Equality</h1>
<p>In F# you only use a single equals sign for a comparison (as opposed to the double equals you will find in C#). Since values are immutable by default in F#, it is much more common to compare two values than to assign a new value to an existing value.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">isSumEven</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">sum</span> <span class="p">=</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
    <span class="n">sum</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">=</span> <span class="mi">0</span>
</code></pre></div></div>

<p>In the above example:</p>
<ul>
  <li><code class="highlighter-rouge">let isSumEven num1 num2 = </code> assigns the following function to the add identifier</li>
  <li><code class="highlighter-rouge">let sum = num1 + num2</code> assigns num1 + num1 to the sum identifier</li>
  <li><code class="highlighter-rouge">sum % 2 = 0</code> compares if sum is equal</li>
</ul>

<table>
  <thead>
    <tr>
      <th>When the equals symbol is used</th>
      <th>What is does</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Immediately after the let keyword and an identifier</td>
      <td>Assigns the following expression to the identifier</td>
    </tr>
    <tr>
      <td>Immediately after the module keyword and an identifier</td>
      <td>Assigns the indented code below to the module</td>
    </tr>
    <tr>
      <td>In any other expression</td>
      <td>Compares two values</td>
    </tr>
  </tbody>
</table>

<p>It is also worth noting that the <code class="highlighter-rouge">&lt;&gt;</code> operator is used to say not equal to, unlike C# where is is <code class="highlighter-rouge">!=</code>.</p>

<h1 id="mutability">Mutability</h1>
<p>F# values are immutable by default. Once you assign a value to an identifier in F#, you cannot modify it. In functional programming this is usually the desired behaviour for a number of reasons.</p>

<ul>
  <li>It makes <strong>concurrency</strong> easier. It prevents a thread from changing another thread’s objects.</li>
  <li>Makes code more <strong>reasonable</strong>. If values cannot be modified, code becomes much easier to read and follow, since you don’t need to keep track of changes that are made to objects. If a function takes in an object you know that the function doesn’t modify it.</li>
  <li>It becomes easier to make <strong>fluent APIs</strong> that read really well.</li>
</ul>

<p>There are scenarios however, where you need an object to be mutable. One of these could be for performance reasons. If you have an array with a million items, you may not want to recreate an array of 999,999 items just remove one. You can make an object mutable in F# by using the <code class="highlighter-rouge">mutable</code> keyword:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">mutableValue</span> <span class="bp">()</span> <span class="p">=</span>
    <span class="k">let</span> <span class="k">mutable</span> <span class="n">x</span> <span class="p">=</span> <span class="mi">5</span>
    <span class="n">x</span> <span class="p">&lt;-</span> <span class="mi">10</span>
    <span class="n">x</span>
</code></pre></div></div>

<p>The above example creates a mutable value called x. It then uses the <code class="highlighter-rouge">&lt;-</code> operator to assign a new value to it. It then returns the new value (10). The left arrow is used because a single equals sign is used for comparisons whenever you are not using the let or module keywords.</p>

<p>You should only make an object mutable when you have a really good reason for doing so, as immutability is one the corner stones of functional programming.</p>

<h1 id="tuples">Tuples</h1>
<p>If you’re keeping up to date with C# 7, then you will be aware of what tuples are. If you haven’t though, tuples are ordered groups of values. If you have a list of integers you can have 0 to N integers. Tuples allow you to create an object that contains a finite amount of different types. For example you could create a tuple that contains an integer then a string and then another integer.</p>

<p>One of the main uses for tuples is that they allow you to return multiple values from a function without having to create a small POCO class to contain them.</p>

<p>In F# tuples are written using parenthesis with the items inside separated by commas. Below is an example of a function that returns a tuple that contains an integer and then a string:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTen</span> <span class="n">num</span> <span class="p">=</span>
    <span class="p">(</span><span class="n">num</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="s2">"The original value was "</span> <span class="o">+</span> <span class="n">num</span><span class="p">)</span>
</code></pre></div></div>

<p>The example above returns the value with ten added to it in the tuple’s first item, and a string containing the value in the tuple’s second item.</p>

<p>Tuples can also be unpacked or <em>deconstructed</em> when they are assigned to. Below is an example of how tuples are assigned to:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">result</span><span class="p">,</span> <span class="n">message</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">20</span>
</code></pre></div></div>

<p>In the above example, <em>result</em> contains the integer in the first item of the tuple and <em>message</em> contains the string in the second item of the tuple. Unpacking tuples is optional. You can always unpack the tuple later. This is demonstrated in the following example:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">resultAndMessage</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">20</span>
<span class="k">let</span> <span class="n">result</span><span class="p">,</span> <span class="n">message</span> <span class="p">=</span> <span class="n">resultAndMessage</span>
</code></pre></div></div>

<p>As you can see, using tuples is a very convenient way of returning multiple values from a function without having to create a small type and then extracting the values out of it. They also have another purpose in F# which we will cover <a href="#currying">later</a>.</p>

<h1 id="unit">Unit</h1>
<p>As mentioned previously, all functions in F# are expressions. Functions that return void cannot be used in expressions. As an example, you cannot use functions that return void in ternary expressions in C#. To demonstrate this point, the following C# code will not compile:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">args</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">0</span>
            <span class="p">?</span> <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span>
            <span class="p">:</span> <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"world"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This is because expressions must have a return type. F# has a special type called <strong>unit</strong>. Unit is an empty value. You cannot do anything with the unit type, but since it is an actual value (unlike void which is the absence of a value) you can use it in expressions. Any methods that return void in C#, such as <code class="highlighter-rouge">Thread.Sleep</code> and <code class="highlighter-rouge">Console.WriteLine</code>, return unit when used in F#.</p>

<p>Unit is expressed in F# by using two brackets next to each other like this: <code class="highlighter-rouge">()</code>. It could be described as an empty tuple. Below is an example of an entirely pointless function that takes in unit and returns unit.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">returnUnit</span> <span class="bp">()</span> <span class="p">=</span> 
    <span class="bp">()</span>
</code></pre></div></div>
<p>If you want to disregard the returned value of a function and return unit instead, F# has a function called <code class="highlighter-rouge">ignore</code> that does this for you. For example <code class="highlighter-rouge">Console.ReadLine</code> returns a string but if we want our function to return unit, we can use the ignore function to <em>ignore</em> the string returned from the ReadLine method and return unit instead.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">waitUntilEnter</span> <span class="bp">()</span> <span class="p">=</span> 
    <span class="n">ignore</span> <span class="p">(</span><span class="nn">Console</span><span class="p">.</span><span class="nc">ReadLine</span><span class="bp">()</span><span class="p">)</span>
</code></pre></div></div>

<p>The waitUntilEnter function above returns the empty unit type rather than the string returned by the ReadLine method.</p>

<h1 id="records">Records</h1>
<p>Records are immutable POCO classes that offer value based equality for free (as opposed to the reference based equality you get by default in C#). Below is an example of a record declaration:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">Person</span> <span class="p">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="kt">string</span>
    <span class="n">age</span><span class="p">:</span> <span class="kt">int</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To instantiate a record the following syntax is used:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">person</span> <span class="p">=</span> <span class="p">{</span> 
    <span class="n">name</span> <span class="p">=</span> <span class="s2">"Connel"</span>
    <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The F# compiler infers the type for us. It looks through all the available types for any types that have both the “name” and “age” properties. Since there is only one, the compiler can successfully infer the type of this object to that of a <em>Person</em> type. This is an example of how F# type inference is head and shoulders above C#’s.</p>

<p>If you have two records with the same properties then you can use type annotations to tell the compiler which one to use, although this is very rare. If you have two records with the exact same properties you should probably merge them. Since a record is a class it can be placed inside a namespace or module.</p>

<p>One of the best features of records is how they are compared. For example take the following F# code:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">open</span> <span class="nc">System</span>

<span class="k">type</span> <span class="nc">Person</span> <span class="p">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="kt">string</span>
    <span class="n">age</span><span class="p">:</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="p">[&lt;</span><span class="nc">EntryPoint</span><span class="p">&gt;]</span>
<span class="k">let</span> <span class="n">main</span> <span class="n">argv</span> <span class="p">=</span> 
    <span class="k">let</span> <span class="n">person1</span> <span class="p">=</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s2">"Connel"</span><span class="p">;</span> <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span> <span class="p">}</span>
    <span class="k">let</span> <span class="n">person2</span> <span class="p">=</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s2">"Hooley"</span><span class="p">;</span> <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span> <span class="p">}</span>
    <span class="k">let</span> <span class="n">person3</span> <span class="p">=</span> <span class="p">{</span> <span class="n">name</span> <span class="p">=</span> <span class="s2">"Connel"</span><span class="p">;</span> <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span> <span class="p">}</span>
    <span class="k">let</span> <span class="n">isPerson1Person2</span> <span class="p">=</span> <span class="n">person1</span> <span class="p">=</span> <span class="n">person2</span>
    <span class="k">let</span> <span class="n">isPerson1Person3</span> <span class="p">=</span> <span class="n">person1</span> <span class="p">=</span> <span class="n">person3</span>
    <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="n">isPerson1Person2</span><span class="p">)</span> <span class="c1">// prints false</span>
    <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="n">isPerson1Person3</span><span class="p">)</span> <span class="c1">// prints true</span>
    <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="s2">"Press enter to exit"</span><span class="p">)</span>
    <span class="k">let</span> <span class="n">value</span> <span class="p">=</span> <span class="nn">Console</span><span class="p">.</span><span class="nc">ReadLine</span><span class="bp">()</span>
    <span class="mi">0</span> <span class="c1">// return an integer exit code</span>
</code></pre></div></div>

<p>In the example above we have a main method that creates 3 Person records. The first and second Person records have a different name, whereas the first and third records have the same properties. Notice how comparing person1 and person3 results in “True” being printed. This is because records check for equality by comparing <strong>all</strong> of their properties. It does not perform a reference comparison like C# does. This is really useful for <strong>unit testing</strong>. It means we do not have to waste our time writing <code class="highlighter-rouge">Equals</code> implementations to actual perform a valid comparison. The majority of the time we only care if the values in an object are equal and not the reference.</p>

<p>Other things to note:</p>
<ul>
  <li>If a record contains another record then the comparison “crawls” down the object, it is not a shallow comparison. If a record contains a list, then every item in the list is compared to ensure that the lists contain the same items. This can result in a performance drop so be mindful of this when checking if two complex records are equal.</li>
  <li>The new keyword is never required in F#.</li>
  <li>A semi-colon is used in the previous example to create a record on one line.</li>
</ul>

<h1 id="if-expression">If Expression</h1>
<p>F# does not have a ternary operator, since everything is already an expression in F#. The F# equivalent to the C# ternary operator is the if expression. When using an if expression, all the branches of the expression must return the same type. For example:</p>

<div class="language-ocaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nc">Helpers</span> <span class="o">=</span>
    <span class="k">let</span> <span class="n">isConnel</span> <span class="n">x</span> <span class="o">=</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">"Connel"</span> <span class="k">then</span>
            <span class="s2">"The value is Connel"</span>
        <span class="k">else</span>
            <span class="s2">"The value is not Connel"</span>
</code></pre></div></div>

<p>Like everything in F#, the if expression is whitespace sensitive so there is no need for curly braces or semi colons. The other main difference compared to C# is that there is no need to parenthesis around the condition and there is an additional <em>then</em> keyword required.</p>

<p>Both parts of the expression above returns a string. If the else branch returned a boolean for example, the code would not compile.</p>

<h1 id="let-expression">Let Expression</h1>
<p>In C# it is not possible to declare variables in expressions. To combat this, F# has the let expression. We’ve seen the let expression in action quite a few times already but it is worth exploring how it works. The let expression works by binding the result of an expression to an identifier that can be used in the next expression.</p>

<blockquote>
  <p>let [identifier] = [binding_expression] [usage_expression]</p>
</blockquote>

<p>You can think of the let expression to be syntactical sugar for the following function in C#:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Bind</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">bindingExpression</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">usageExpression</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">usageExpression</span><span class="p">(</span><span class="nf">bindingExpression</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Therefore this F# code:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">a</span> <span class="p">=</span> <span class="mi">5</span>
<span class="k">let</span> <span class="n">b</span> <span class="p">=</span> <span class="n">a</span> <span class="p">*</span> <span class="mi">2</span>
<span class="k">let</span> <span class="n">c</span> <span class="p">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="n">c</span><span class="o">);</span>
</code></pre></div></div>

<p>Equates to this C# code:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">Bind</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="m">5</span><span class="p">,</span> <span class="n">a</span> <span class="p">=&gt;</span> <span class="c1">// assign value of 5 to a</span>
<span class="p">{</span>
    <span class="nf">Bind</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">a</span> <span class="p">*</span> <span class="m">2</span><span class="p">,</span> <span class="n">b</span> <span class="p">=&gt;</span> <span class="c1">// assign value of a * 2 to b</span>
    <span class="p">{</span>
        <span class="nf">Bind</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="p">=&gt;</span> <span class="c1">// assign of a + b to c</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h1 id="function-signatures">Function Signatures</h1>
<p>In C# method signatures look like this (see <a target="_BLANK" href="http://stackoverflow.com/a/8808773/310098">here</a> for why I’ve included the return type if you’re curious):</p>

<blockquote>
  <p>int Add(int, int)</p>
</blockquote>

<p>Or, if you wanted to take in a method that followed this notation as a parameter, you would need to take in an object of the type:</p>

<blockquote>
  <p>Func&lt;int, int, int&gt;</p>
</blockquote>

<p>F# has its own notation for a method’s signature. The add function above has the following signature in F#:</p>

<blockquote>
  <p>int -&gt; int -&gt; int</p>
</blockquote>

<p>This F# signature appears to closely resemble the corresponding <code class="highlighter-rouge">Func</code> type in C#. The item on the far right is the return type, and the items to its left are the values you need to put in to get that return type out.</p>

<p>One F#’s nice features is that a function’s signature is also its type, it isn’t two different things like in C#.</p>

<p>Asterisks are used to denote tuples. The following example is the signature of a function that takes in an integer and returns a tuple with an integer as its first item and a string as its second item.</p>

<blockquote>
  <p>int -&gt; int * string</p>
</blockquote>

<p>Take the following F# function:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">doubleWhenTrue</span> <span class="n">num</span> <span class="n">predicate</span> <span class="p">=</span>
    <span class="k">if</span><span class="p">(</span><span class="n">predicate</span><span class="p">(</span><span class="n">num</span><span class="o">))</span> <span class="k">then</span>
        <span class="n">num</span><span class="p">*</span><span class="mi">2</span>
    <span class="k">else</span>
        <span class="n">num</span>
</code></pre></div></div>

<p>The example above is a function that takes in another function as a parameter. The notion/type for this function is:</p>

<blockquote>
  <p>int -&gt; (int -&gt; bool) -&gt; int</p>
</blockquote>

<p>Parenthesis are used to indicate the nested function that is a parameter. Parenthesis are also used to indicate a function that is returned. Take the following F# function:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">add</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">sum</span> <span class="p">=</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
    <span class="k">let</span> <span class="n">returnFunction</span> <span class="n">num</span> <span class="p">=</span> 
        <span class="n">sum</span> <span class="o">+</span> <span class="n">num</span>
    <span class="n">returnFunction</span>
</code></pre></div></div>

<p>The example above is a function takes in two integers, adds them together and then returns another function that takes in another int and adds it to the sum of the previous two integers and returns the result. The notion/type for this function is:</p>

<p>int -&gt; int -&gt; (int -&gt; int)</p>

<p>Please note that you would never usually write a function like that and would instead use <a href="#currying">currying</a>.</p>

<h1 id="currying">Currying</h1>
<p>One of the powerful features of F# that differentiates it from C# is its built-in currying. Currying is when you split a single function of N parameters into N separate functions. For example, if you take the following C# function type:</p>

<blockquote>
  <p>Func&lt;int, int, int, int&gt;</p>
</blockquote>

<p>Calling a function of this type would look like this: <code class="highlighter-rouge">int sum = addThreeNumbers(1,2,3);</code></p>

<p>If you were to <strong>curry</strong> it, you would end up with a function of the following function type:</p>

<blockquote>
  <p>Func&lt;int, Func&lt;int, Func&lt;int, int&gt;&gt;&gt;</p>
</blockquote>

<p>Calling this function would look like this: <code class="highlighter-rouge">int sum addThreeNumbersCurried(1)(2)(3);</code></p>

<p>This generic function type is pretty confusing and long, and this is a major reason why F# (and functional programming in general) leans heavily on type inference.</p>

<p>In F# all functions are curried by default. For example take the following F# function:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTwoNumbers</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
    <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
</code></pre></div></div>

<p>The above function takes in two parameters and adds them together. In F# you can actually call this function with just one parameter. Since the function is curried it returns a function that takes in a single integer and returns an integer.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTen</span> <span class="p">=</span> <span class="n">addTwoNumbers</span> <span class="mi">10</span>
<span class="k">let</span> <span class="n">twelve</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">2</span>
<span class="k">let</span> <span class="n">fifteen</span> <span class="p">=</span> <span class="n">addTen</span> <span class="mi">5</span>
</code></pre></div></div>

<p>Calling a function without all of its parameters is called a <strong>partial function application</strong>. Due to F#’s built in currying, it is not possible to overload a function in F#. For example the following interface is perfectly valid in C#:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IMathsHelpers</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="nf">Add</span><span class="p">(</span><span class="kt">int</span> <span class="n">num1</span><span class="p">);</span>
    <span class="kt">int</span> <span class="nf">Add</span><span class="p">(</span><span class="kt">int</span> <span class="n">num1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In C#, the compiler knows that if you only provide one integer then it should call the first method and if you provide two then it should call the second method. In F# however, the compiler would not know whether you wanted to call the first method or <strong>partially apply</strong> the second method.</p>

<p>If you want to prevent a function from being partially applied, you can group together the inputs in a tuple. Since a tuple is a single value you must give all of the items inside the tuple at the same time. For example take the following F# method:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">addTwoNumbersTuple</span> <span class="p">(</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="o">)=</span>
    <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
</code></pre></div></div>

<p>This function takes a single tuple as its only parameter, instead of taking two separate integer values. The signature of this function is:</p>

<blockquote>
  <p>int * int -&gt; int</p>
</blockquote>

<p>As you can see there is only one arrow in the function type signature. An arrow indicates where a function type can be partially applied. The following would not compile as you need to provide the entire tuple: <code class="highlighter-rouge">let addFive = addTwoNumbersTuple 5</code></p>

<p>Method overloads from C# types are still available in F#. Any function created outside of F# in .NET is exposed to an F# project as a function that has a single tuple as its input. This means you cannot partially apply a function created outside of F#. For example String.Format has the following overloaded signatures:</p>

<p><img src="http://connelhooley.uk/assets/images/f-sharp-guide/f-sharp-string-format-overloads.png" alt="Screenshot of String.Format overloads in an F# project" /></p>

<p>Partially applying functions can also be used as a form of dependency management. Take the following C# example:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IBookingSystem</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="nf">IsRoomAvailable</span><span class="p">(</span><span class="kt">int</span> <span class="n">hotelId</span><span class="p">,</span> <span class="n">DateTime</span> <span class="n">dateTime</span><span class="p">);</span>
    <span class="kt">string</span> <span class="nf">GetBooking</span><span class="p">(</span><span class="kt">int</span> <span class="n">hotelId</span><span class="p">,</span> <span class="n">DateTime</span> <span class="n">dateTime</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">interface</span> <span class="nc">IEmailer</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="nf">EmailBooking</span><span class="p">(</span><span class="kt">string</span> <span class="n">emailAddress</span><span class="p">,</span> <span class="kt">string</span> <span class="n">bookingId</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Hotel</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IBookingSystem</span> <span class="n">_bookingSystem</span><span class="p">;</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IEmailer</span> <span class="n">_emailer</span><span class="p">;</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">_hotelId</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Hotel</span><span class="p">(</span><span class="n">IBookingSystem</span> <span class="n">bookingSystem</span><span class="p">,</span> <span class="n">IEmailer</span> <span class="n">emailer</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hotelId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_bookingSystem</span> <span class="p">=</span> <span class="n">bookingSystem</span><span class="p">;</span>
        <span class="n">_emailer</span> <span class="p">=</span> <span class="n">emailer</span><span class="p">;</span>
        <span class="n">_hotelId</span> <span class="p">=</span> <span class="n">hotelId</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="nf">BookRoom</span><span class="p">(</span><span class="kt">string</span> <span class="n">emailAddress</span><span class="p">,</span> <span class="n">DateTime</span> <span class="n">dateTime</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_bookingSystem</span><span class="p">.</span><span class="nf">IsRoomAvailable</span><span class="p">(</span><span class="n">_hotelId</span><span class="p">,</span> <span class="n">dateTime</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="kt">string</span> <span class="n">bookingId</span> <span class="p">=</span> <span class="n">_bookingSystem</span><span class="p">.</span><span class="nf">GetBooking</span><span class="p">(</span><span class="n">_hotelId</span><span class="p">,</span> <span class="n">dateTime</span><span class="p">);</span>
            <span class="n">_emailer</span><span class="p">.</span><span class="nf">EmailBooking</span><span class="p">(</span><span class="n">emailAddress</span><span class="p">,</span> <span class="n">bookingId</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The hotel class takes in three dependencies in its constructor. It then takes in another two items in the book room method. In F# this would become one function like this:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nc">Hotel</span>

<span class="k">open</span> <span class="nc">System</span>

<span class="k">let</span> <span class="n">bookRoom</span> 
    <span class="p">(</span><span class="n">isRoomAvailable</span><span class="p">:</span> <span class="kt">int</span><span class="p">-&gt;</span><span class="nc">DateTime</span><span class="p">-&gt;</span><span class="kt">bool</span><span class="p">)</span> 
    <span class="p">(</span><span class="n">getBooking</span><span class="p">:</span> <span class="kt">int</span><span class="p">-&gt;</span><span class="nc">DateTime</span><span class="p">-&gt;</span><span class="kt">string</span><span class="p">)</span> 
    <span class="p">(</span><span class="n">emailBooking</span><span class="p">:</span><span class="kt">string</span><span class="p">-&gt;</span><span class="kt">string</span><span class="p">-&gt;</span><span class="kt">unit</span><span class="p">)</span> 
    <span class="p">(</span><span class="n">hotelId</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span>
    <span class="p">(</span><span class="n">emailAddress</span><span class="p">:</span> <span class="kt">string</span><span class="p">)</span> 
    <span class="p">(</span><span class="n">dateTime</span><span class="p">:</span> <span class="nc">DateTime</span><span class="p">)</span> <span class="p">=</span>
        <span class="k">if</span> <span class="n">isRoomAvailable</span> <span class="n">hotelId</span> <span class="n">dateTime</span> <span class="k">then</span>
            <span class="k">let</span> <span class="n">bookingId</span> <span class="p">=</span> <span class="n">getBooking</span> <span class="n">hotelId</span> <span class="n">dateTime</span>
            <span class="n">emailBooking</span> <span class="n">emailAddress</span> <span class="n">bookingId</span>
            <span class="bp">true</span>
        <span class="k">else</span>
            <span class="bp">false</span>
</code></pre></div></div>

<p>I’ve added type annotations to the function’s parameters so you can see their types, although they aren’t necessary and could be removed to make it easier to read. Instead of injecting interfaces into a class’s constructor, you pass in any dependant functions as the function’s first parameters. This means you can partially apply the function like so:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">createBooking</span> <span class="p">=</span> <span class="nn">Hotel</span><span class="p">.</span><span class="n">bookRoom</span> <span class="nn">BookingSystem</span><span class="p">.</span><span class="n">isRoomAvailable</span> <span class="nn">BookingSystem</span><span class="p">.</span><span class="n">getBooking</span> <span class="nn">Email</span><span class="p">.</span><span class="n">emailBooking</span> <span class="mi">5</span>
</code></pre></div></div>

<p>In the line above, we call the <code class="highlighter-rouge">Hotel.bookRoom</code> function and only provide 4 out of its 6 parameters. This leaves us with a function with the following signature:</p>

<blockquote>
  <p>string -&gt; DateTime -&gt; bool</p>
</blockquote>

<p>The <code class="highlighter-rouge">BookRoom</code> method on the <code class="highlighter-rouge">Hotel</code> class in the C# code has the same signature. Partially applying functions results in code that is still perfectly testable. When testing the <code class="highlighter-rouge">Hotel.bookRoom</code> function, we can pass in any fake implementation for any of its dependencies. For example if we want to test what happens in our <code class="highlighter-rouge">Hotel.bookRoom</code> function when <code class="highlighter-rouge">isRoomAvailable</code> returns false, we can just pass in a function that always returns false.</p>

<p>This means we get fully unit testable code without the following overheads:</p>
<ul>
  <li>Creating an interface for every class, just so it can be mocked</li>
  <li>No need for mocking frameworks at all</li>
  <li>No need for IOC frameworks to bind interfaces to their concrete implementations</li>
</ul>

<h1 id="lambdas">Lambdas</h1>
<p>Obviously F# has support for lambdas. If a function takes in another function as a parameter, then you can pass in a lambda, rather than using a let expression to create a function and then passing that in.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">doubleWhenTrue</span> <span class="n">num</span> <span class="n">predicate</span> <span class="p">=</span>
    <span class="k">if</span><span class="p">(</span><span class="n">predicate</span><span class="p">(</span><span class="n">num</span><span class="o">))</span> <span class="k">then</span>
        <span class="n">num</span><span class="p">*</span><span class="mi">2</span>
    <span class="k">else</span>
        <span class="n">num</span>
<span class="k">let</span> <span class="n">x</span> <span class="p">=</span> <span class="n">doubleWhenTrue</span> <span class="mi">5</span> <span class="p">(</span><span class="k">fun</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">=</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<p>The lambda above is <code class="highlighter-rouge">(fun i -&gt; i % 2 = 0)</code>. Lambdas:</p>
<ul>
  <li>Are wrapped in parenthesis</li>
  <li>Start with the <code class="highlighter-rouge">fun</code> keyword</li>
  <li>Use a skinny arrow, rather than the fat arrow like in C#</li>
</ul>

<h1 id="discriminated-unions">Discriminated Unions</h1>
<p>In C#, if you want a function to take in one of several types you can use polymorphism or method overloads. As we have just covered, method overloads are not available to F# functions and records and tuples do not support inheritance. In F# discriminated unions tend to be used instead. A discriminated union type is like an enum of types. An instance of a discriminated union can be any <em>one</em> of the types in the enum. Below is an example of a discriminated union:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">State</span> <span class="p">=</span>
<span class="p">|</span> <span class="nc">Error</span> <span class="k">of</span> <span class="nc">Exception</span>
<span class="p">|</span> <span class="nc">Info</span> <span class="k">of</span> <span class="kt">string</span>
<span class="p">|</span> <span class="nc">Warning</span> <span class="k">of</span> <span class="kt">int</span> <span class="p">*</span> <span class="kt">string</span>
</code></pre></div></div>

<p>An instance of the State type above can be an Error, Info or Warning. These identifiers are called <strong>union cases</strong>. In the above example the Error union case is an exception, the Info union case is a string, and the Warning union case is a tuple that contains an integer and a string. The following three functions all return the same <code class="highlighter-rouge">State</code> type.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">createError</span> <span class="bp">()</span> <span class="p">=</span> <span class="nc">Error</span><span class="p">(</span><span class="nc">Exception</span><span class="p">(</span><span class="s2">""</span><span class="o">))</span>
<span class="k">let</span> <span class="n">createInfo</span> <span class="bp">()</span> <span class="p">=</span> <span class="nc">Info</span><span class="p">(</span><span class="s2">"Example info text here"</span><span class="p">)</span>
<span class="k">let</span> <span class="n">createWarning</span> <span class="bp">()</span> <span class="p">=</span> <span class="nc">Warning</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s2">"Example warning text here"</span><span class="p">)</span>
</code></pre></div></div>

<p>As you can see each union case has its own constructor that you must put the values into for that union case. Union cases can also be empty. When used like this they are much like an enum:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">State</span> <span class="p">=</span>
 <span class="p">|</span> <span class="nc">Error</span>
 <span class="p">|</span> <span class="nc">Info</span>
 <span class="p">|</span> <span class="nc">Warning</span>
</code></pre></div></div>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">createError</span> <span class="bp">()</span> <span class="p">=</span> <span class="nc">Error</span>
<span class="k">let</span> <span class="n">createInfo</span> <span class="bp">()</span> <span class="p">=</span> <span class="nc">Info</span>
<span class="k">let</span> <span class="n">createWarning</span> <span class="bp">()</span> <span class="p">=</span> <span class="nc">Warning</span>
</code></pre></div></div>

<p>Whereas inheritance in C# offers the flexibility of a tree like structure, where objects inherit properties from their parents, discriminated unions offer a more flat structure, where objects do not share properties from their parent.</p>

<p>Discriminated unions are combined with <a href="#match-expression-pattern-matching">pattern matching</a> to form the most common way of managing flow control in F# applications.</p>

<h1 id="match-expression-pattern-matching">Match Expression (Pattern Matching)</h1>
<p>The match expression and pattern matching are massive topics in their own right, and I will only be scratching the surface here. The match expression can be thought of as a more powerful switch statement. Below is an example of a match expression:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">State</span> <span class="p">=</span>
    <span class="p">|</span> <span class="nc">Error</span> <span class="k">of</span> <span class="nc">Exception</span>
    <span class="p">|</span> <span class="nc">Info</span> <span class="k">of</span> <span class="kt">string</span>
    <span class="p">|</span> <span class="nc">Warning</span> <span class="k">of</span> <span class="kt">int</span> <span class="p">*</span> <span class="kt">string</span>

<span class="k">let</span> <span class="n">getStateMessage</span> <span class="n">state</span> <span class="p">=</span>
    <span class="k">match</span> <span class="n">state</span> <span class="k">with</span>
    <span class="p">|</span> <span class="nc">Error</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="s2">"Error message: "</span> <span class="o">+</span> <span class="n">ex</span><span class="p">.</span><span class="nc">Message</span>
    <span class="p">|</span> <span class="nc">Info</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="s2">"Info message: "</span> <span class="o">+</span> <span class="n">message</span>
    <span class="p">|</span> <span class="nc">Warning</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="s2">"Warning message: "</span> <span class="o">+</span> <span class="n">message</span>
</code></pre></div></div>

<p>The function above takes in a <code class="highlighter-rouge">State</code> discriminated union and then performs pattern matching on it:</p>
<ul>
  <li>If the state is an Error union case, it runs the following expression <code class="highlighter-rouge">"Error message: " + ex.Message</code></li>
  <li>If the state is an Info union case, it runs the following expression <code class="highlighter-rouge">"Info message: " + message</code></li>
  <li>If the state is a Warning union case, it runs the following expression <code class="highlighter-rouge">"Warning message: " + message</code></li>
</ul>

<p>Just like the if expression, the match expression must return the same type from all of its branches. For the example above, all three branches in the match expression must return a string. If one of them tried to return an integer the code would not compile.</p>

<p>A match expression unpacks or <em>deconstructs</em> the union cases it matches on. If you look at the error branch <code class="highlighter-rouge">Error(ex) -&gt; "Error message: " + ex.Message</code> you can see that the expression that is ran has access to the exception inside the Error union case.</p>

<p>Match expressions should be <strong>exhaustive</strong>. This means that no matter what value of a particular type is given to the expression, there should always be a branch that matches on that value. The match statement can perform pattern matching against any type, not just discriminated unions, as shown in the following example:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">matchNumbers</span> <span class="n">x</span> <span class="p">=</span>
    <span class="k">match</span> <span class="n">x</span> <span class="k">with</span>
    <span class="p">|</span> <span class="mi">9</span> <span class="p">-&gt;</span> <span class="s2">"I was given 9"</span>
</code></pre></div></div>

<p>The function above takes in an integer and performs pattern matching on it. If x matches the value of 9 then a string is returned. If the integer is not 9 however, a runtime exception will be thrown. This is because the match expression is not <strong>exhaustive</strong>. The above function actually generates a compile time warning:</p>

<blockquote>
  <p>Incomplete pattern matches on this expression. For example, the value ‘0’ may indicate a case not covered by the pattern(s).</p>
</blockquote>

<p>The compiler even gives you an example of a value that does not match! Match expressions have a concept similar to the <code class="highlighter-rouge">default</code> statement found in C# <code class="highlighter-rouge">switch</code> statements. The underscore wild-card in F# matches against any object. The following example is exhaustive:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">matchNumbers</span> <span class="n">x</span> <span class="p">=</span>
    <span class="k">match</span> <span class="n">x</span> <span class="k">with</span>
    <span class="p">|</span> <span class="mi">9</span> <span class="p">-&gt;</span> <span class="s2">"I was given 9"</span>
    <span class="p">|</span> <span class="p">_</span> <span class="p">-&gt;</span> <span class="s2">"I was not given 9"</span>
</code></pre></div></div>

<p>You can also use a conditional expression to match against a certain type when a certain condition is true. The following example demonstrates this:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">processAge</span> <span class="n">age</span> <span class="p">=</span>
    <span class="k">match</span> <span class="n">age</span> <span class="k">with</span>
    <span class="p">|</span> <span class="n">age</span> <span class="k">when</span> <span class="n">age</span> <span class="p">&lt;</span> <span class="mi">18</span> <span class="p">-&gt;</span> <span class="s2">"Child: "</span> <span class="o">+</span> <span class="n">age</span>
    <span class="p">|</span> <span class="n">age</span> <span class="k">when</span> <span class="n">age</span> <span class="p">&gt;</span> <span class="mi">65</span> <span class="p">-&gt;</span> <span class="s2">"OAP:"</span> <span class="o">+</span> <span class="n">age</span>
    <span class="p">|</span> <span class="n">age</span> <span class="p">-&gt;</span> <span class="s2">"Adult: "</span> <span class="o">+</span> <span class="n">age</span>
</code></pre></div></div>

<p>As you can see, the <code class="highlighter-rouge">when</code> keyword can be used to add a condition to a branch. For example <code class="highlighter-rouge">age when age &lt; 18</code> only matches when age is below 18. This example also demonstrates how to have a branch that matches any value, whilst still using that value in the branch’s expression. When you match with the underscore wild-card, you cannot access the value that is matched against in the expression to the right of the arrow. To match against any value simply give the value a name. This branch <code class="highlighter-rouge">age -&gt; "Adult: " + age</code> matches against any integer and gives it the name <em>age</em>. Age is then available in the expression to the right of the arrow.</p>

<p>Since match is an expression and therefore returns a value, it would not make sense for match expression branches to <em>fall through</em> to other matched expressions. The only expression that is ran is the first one that matches, therefore the order of the branches is important. This is why F# does not have an equivalent of the <code class="highlighter-rouge">break</code> keyword found in C#’s <code class="highlighter-rouge">switch</code> statements.</p>

<h1 id="exceptions">Exceptions</h1>
<p>Exceptions in F# are like discriminated unions with a single union case. Below is an example of an F# exception type, whose contents is a tuple that contains a string in its first item, and a record in its second item.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">exception</span> <span class="nc">InvalidPerson</span> <span class="k">of</span> <span class="kt">string</span> <span class="p">*</span> <span class="nc">Person</span>
</code></pre></div></div>

<p>To throw an exception the <code class="highlighter-rouge">raise</code> keyword is used.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">exception</span> <span class="nc">InvalidName</span> <span class="k">of</span> <span class="kt">string</span>
<span class="k">exception</span> <span class="nc">InvalidAge</span> <span class="k">of</span> <span class="kt">int</span>

<span class="k">let</span> <span class="n">validate</span> <span class="n">person</span> <span class="p">=</span>
    <span class="k">if</span> <span class="n">person</span><span class="p">.</span><span class="n">name</span> <span class="p">&lt;&gt;</span> <span class="s2">"Connel"</span> <span class="k">then</span>
        <span class="n">raise</span><span class="p">(</span><span class="nc">InvalidName</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">name</span><span class="o">))</span>
    <span class="k">else</span> <span class="k">if</span> <span class="n">person</span><span class="p">.</span><span class="n">age</span> <span class="p">&lt;</span> <span class="mi">18</span> <span class="k">then</span>
        <span class="n">raise</span><span class="p">(</span><span class="nc">InvalidAge</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">age</span><span class="o">))</span>
    <span class="k">else</span>
        <span class="n">person</span>
</code></pre></div></div>

<p>The raise keyword can also throw .NET exceptions created outside of F#:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">validate</span> <span class="n">person</span> <span class="p">=</span>
    <span class="k">if</span> <span class="n">person</span><span class="p">.</span><span class="n">name</span> <span class="p">&lt;&gt;</span> <span class="s2">"Connel"</span> <span class="p">&amp;&amp;</span> <span class="n">person</span><span class="p">.</span><span class="n">age</span> <span class="p">&lt;</span> <span class="mi">18</span> <span class="k">then</span>
        <span class="n">raise</span><span class="p">(</span><span class="nc">InvalidOperationException</span><span class="bp">()</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="try-expression">Try Expression</h1>
<p>The try expression is used in F# to catch thrown exceptions. It has a very similar syntax to the match expression:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">exception</span> <span class="nc">InvalidName</span> <span class="k">of</span> <span class="kt">string</span>
<span class="k">exception</span> <span class="nc">InvalidAge</span> <span class="k">of</span> <span class="kt">int</span>
    
<span class="k">let</span> <span class="n">validate</span> <span class="n">person</span> <span class="p">=</span>
    <span class="k">if</span> <span class="n">person</span><span class="p">.</span><span class="n">name</span> <span class="p">&lt;&gt;</span> <span class="s2">"Connel"</span> <span class="k">then</span>
        <span class="n">raise</span><span class="p">(</span><span class="nc">InvalidName</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">name</span><span class="o">))</span>
    <span class="k">else</span> <span class="k">if</span> <span class="n">person</span><span class="p">.</span><span class="n">age</span> <span class="p">&lt;</span> <span class="mi">18</span> <span class="k">then</span>
        <span class="n">raise</span><span class="p">(</span><span class="nc">InvalidAge</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">age</span><span class="o">))</span>

<span class="k">let</span> <span class="n">print</span> <span class="n">person</span> <span class="p">=</span>
    <span class="k">try</span>
        <span class="n">validate</span> <span class="n">person</span>
        <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="s2">"Person is valid"</span><span class="p">)</span>
    <span class="k">with</span>
    <span class="p">|</span> <span class="nc">InvalidName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="s2">"Person is not named connel, person is named"</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
    <span class="p">|</span> <span class="nc">InvalidAge</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="s2">"Person is under 18, person is "</span> <span class="o">+</span> <span class="n">age</span><span class="p">.</span><span class="nc">ToString</span><span class="bp">()</span> <span class="o">+</span> <span class="s2">" years old"</span><span class="p">)</span>
</code></pre></div></div>

<p>Pattern matching does not work as nicely with exceptions created outside of F#. To match none F# exceptions you have to use the <code class="highlighter-rouge">:?</code> operator, which checks the type of an object. It is the F# equivalent of the <code class="highlighter-rouge">is</code> keyword in C#.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">divide</span> <span class="n">num1</span> <span class="n">num2</span> <span class="p">=</span>
    <span class="k">try</span>
        <span class="p">(</span><span class="n">num1</span> <span class="o">/</span> <span class="n">num2</span><span class="p">)</span>
    <span class="k">with</span> 
    <span class="p">|</span> <span class="o">:?</span> <span class="nc">DivideByZeroException</span> <span class="p">-&gt;</span> <span class="mi">0</span>
</code></pre></div></div>

<h1 id="collection-types">Collection Types</h1>
<p>F# has three main collection types.</p>

<p><code class="highlighter-rouge">Seq</code> is an alias of IEnumerable. Therefore they are lazy loaded. To create a seq you must use a syntax we haven’t seen before. You must type <em>seq</em>, followed by curly braces, then inside the curly braces write an expression that returns a sequence.</p>

<div class="language-ocaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">numbersSeq</span> <span class="o">=</span> <span class="n">seq</span> <span class="p">{</span>
    <span class="n">yield</span> <span class="mi">1</span>
    <span class="n">yield</span> <span class="mi">2</span>
    <span class="n">yield</span> <span class="mi">3</span>
    <span class="n">yield</span> <span class="mi">4</span>
    <span class="n">yield</span> <span class="mi">5</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can only use the <em>yield</em> keyword when inside the curly braces of a seq expression. When using IEnumerables in C#, you very rarely create them yourselves and instead use helper methods like <code class="highlighter-rouge">IEnumerable.Range</code>. In F# this is no different.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">doubleNumber</span> <span class="n">i</span> <span class="p">=</span> <span class="n">i</span><span class="p">*</span> <span class="mi">2</span>
<span class="k">let</span> <span class="n">numbersSeq</span> <span class="p">=</span> <span class="nn">Seq</span><span class="p">.</span><span class="n">init</span> <span class="mi">5</span> <span class="n">doubleNumber</span>
</code></pre></div></div>
<p>The example above creates a sequence that is five numbers long and produces a sequence of numbers where the five numbers are doubled.</p>

<p><code class="highlighter-rouge">List</code> is an eagerly loaded linked list. It is not the same as the C# List type. To create a list use squared brackets:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">numbersList</span> <span class="p">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">;</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span><span class="p">;</span> <span class="mi">4</span><span class="p">;</span> <span class="mi">5</span><span class="p">]</span>
</code></pre></div></div>

<p>If you want the list to be written over one line then use semi-colons as a delimiter (like above) otherwise you can use a new line instead.</p>

<p><code class="highlighter-rouge">Array</code> is the same as a traditional C# array. It has the exact same syntax as an F# list, just with an extra pipe (|) character:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">numbersArray</span> <span class="p">=</span> <span class="p">[|</span><span class="mi">1</span><span class="p">;</span> <span class="mi">2</span><span class="p">;</span> <span class="mi">3</span><span class="p">;</span> <span class="mi">4</span><span class="p">;</span> <span class="mi">5</span><span class="p">|]</span>
</code></pre></div></div>

<p>All three of these types also have corresponding modules that expose functions that you can use on these types. A lot of these functions offer the same functionality as the Linq extension methods in C#, but some of them have different names. Below is a table comparing some of the names:</p>

<table>
  <thead>
    <tr>
      <th>F# function</th>
      <th>Corresponding C# Linq function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>map</td>
      <td>Select</td>
    </tr>
    <tr>
      <td>filter</td>
      <td>Where</td>
    </tr>
    <tr>
      <td>collect</td>
      <td>SelectMany</td>
    </tr>
    <tr>
      <td>fold</td>
      <td>Aggregate</td>
    </tr>
    <tr>
      <td>find</td>
      <td>First</td>
    </tr>
  </tbody>
</table>

<p>The following F# code:</p>
<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">items</span> <span class="p">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">;</span><span class="mi">2</span><span class="p">;</span><span class="mi">3</span><span class="p">;</span><span class="mi">4</span><span class="p">;</span><span class="mi">5</span><span class="p">]</span>
<span class="k">let</span> <span class="n">doubledItems</span> <span class="p">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">map</span> <span class="p">(</span><span class="k">fun</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="n">i</span><span class="p">*</span><span class="mi">2</span><span class="p">)</span> <span class="n">items</span>
<span class="k">let</span> <span class="n">evenItems</span> <span class="p">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">filter</span> <span class="p">(</span><span class="k">fun</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="p">=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">doubledItems</span>
</code></pre></div></div>

<p>Equates to the following C# code:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">items</span> <span class="p">=</span> <span class="k">new</span> <span class="p">[]</span> <span class="p">{</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">};</span>
<span class="kt">var</span> <span class="n">doubledItems</span> <span class="p">=</span> <span class="n">items</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">i</span><span class="p">*</span><span class="m">2</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">evenItems</span> <span class="p">=</span> <span class="n">doubledItems</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">i</span> <span class="p">=&gt;</span> <span class="n">i</span><span class="p">%</span><span class="m">2</span> <span class="p">==</span> <span class="m">0</span><span class="p">);</span>
</code></pre></div></div>

<h1 id="pipe-operator">Pipe Operator</h1>
<p>In C#, fluent APIs are becoming more and more popular. Fluent APIs read really well as you can chain method calls together without needing to declare several local variables. They are also appealing as they read left to right, so they read much more like an actual language. In C# extension methods and the <a target="_BLANK" href="http://blogs.tedneward.com/patterns/Builder-CSharp">builder pattern</a> have become the ways in which fluent APIs tend to be implemented. The problem with the builder pattern approach is that you have to spend the time to design and write a lot of additional code. This additional code then needs to be tested. Extension methods (like those found in Linq) also require you to write your code in a particular way.</p>

<p>F# however allows you write fluent APIs with almost no effort at all. All you have to do is make sure the subject of the function is the last parameter, you can then use the pipe operator to chain method calls together. The pipe operator is typed as <code class="highlighter-rouge">|&gt;</code>. It is very simple in what it does. The pipe operator is simply the following function:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="o">(|&gt;)</span> <span class="n">x</span> <span class="n">f</span> <span class="p">=</span> <span class="n">f</span> <span class="n">x</span>
</code></pre></div></div>

<p>It takes an item and a function that takes in that item. All it does, is it puts the parameter before the function. So <code class="highlighter-rouge">String.IsNullOrEmpty "Connel"</code> becomes <code class="highlighter-rouge">"Connel" |&gt; String.IsNullOrEmpty</code>. Just swapping the order of the items immediately makes the function read left to right, more like and actual language. When you use the pipe operator with partially applied functions, the result is a fluent API:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">filterList</span> <span class="n">items</span> <span class="p">=</span>
    <span class="n">items</span>
    <span class="p">|&gt;</span> <span class="nn">Seq</span><span class="p">.</span><span class="n">map</span> <span class="p">(</span><span class="k">fun</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="n">i</span><span class="p">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">|&gt;</span> <span class="nn">Seq</span><span class="p">.</span><span class="n">filter</span> <span class="p">(</span><span class="k">fun</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="p">=</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<p>The example above takes in a sequence. It then pipes that sequence into the mapping function. <code class="highlighter-rouge">Seq.map</code> is the F# equivalent of the <code class="highlighter-rouge">Select</code> extension method in Linq. It takes two parameters, the first is a function that should be performed on each item in the sequence, and the second is the sequence itself. When we call <code class="highlighter-rouge">Seq.map (fun i -&gt; i*2)</code> we do not supply the sequence as a final parameter. This results in a partially applied function, that only takes in a sequence, which is the exact signature we need for our pipe operator to work. This is why functions in F# take their “main” parameter last, rather than first as it is seen in C#.</p>

<h1 id="option-type">Option Type</h1>
<p>F# types cannot be null. The following example will not compile:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">Person</span> <span class="p">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="kt">string</span>
    <span class="n">age</span><span class="p">:</span> <span class="kt">int</span>
<span class="p">}</span>
<span class="k">let</span> <span class="n">person1</span><span class="p">:</span> <span class="nc">Person</span> <span class="p">=</span> <span class="p">{</span>
    <span class="n">name</span> <span class="p">=</span> <span class="s2">"Connel"</span>
    <span class="n">age</span> <span class="p">=</span> <span class="mi">26</span>
<span class="p">}</span>
<span class="k">let</span> <span class="n">person2</span><span class="p">:</span> <span class="nc">Person</span> <span class="p">=</span> <span class="k">null</span>
</code></pre></div></div>

<p>The above example uses let expressions with type annotations. This means that we provide the type and it is not inferred by the compiler. I used type annotations, as when assigning null to a value, the compiler will obviously not be able to infer the type. Much like how you cannot do <code class="highlighter-rouge">var x = null</code> in C#. The bottom line in the above example results in the following compiler error:</p>

<blockquote>
  <p>The type ‘Person’ does not have ‘null’ as a proper value</p>
</blockquote>

<p>This gives you peace of mind when using F# values, no more null checks!! But what about when you want to represent the lack of a value? Imagine we had a PersonRepository that has a find function. It will search through a database for a Person record that matches a particular name. But what do you do when a person matching that name cannot be found? In C# you would have 3 options:</p>

<ul>
  <li><strong>Throw an exception</strong>. This is how Linq’s <code class="highlighter-rouge">First</code> method works. Exceptions should only be thrown when something <em>exceptional</em> happens, that prevents the application from carrying on. In this example, if you query a database for a name that isn’t there, this isn’t exactly an <em>exceptional circumstance</em>. There could be any number of perfectly good reasons why there are no matches.</li>
  <li><strong>Return null</strong>. This is how Linq’s <code class="highlighter-rouge">FirstOrDefault</code> method works. Functions that sometimes return null are deemed <em>dishonest</em>. Their signature does not fully describe their behaviour. Unless you look up the documentation for FirstOrDefault, it is not clear that it returns null on a no match. It also goes without saying that nulls are evil as they litter you code with null checks and dreaded <em>object is not set to the reference of an object</em> runtime errors.</li>
  <li><strong>Return a complex type that contains a success boolean</strong> property and a property for the the actual result. This is how the <code class="highlighter-rouge">Regex.Match</code> function works. This results in the additional overhead of creating wrapper object and instead of lots of null checks, you have lots of <em>is success</em> checks. There is also something “hacky” about having a property that is only populated when the success boolean is true. If you forget to check the success boolean you could still get null reference exception.</li>
</ul>

<p>F# has a different mechanism for representing an object that may or may not have a value, called the <strong>Option</strong> type. It is simply a discriminated union that represents either <strong>Some</strong> value or the <strong>None</strong> value. The following example matches a regex expression.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nc">RegexHelpers</span>
    <span class="k">open</span> <span class="nn">System</span><span class="p">.</span><span class="nn">Text</span><span class="p">.</span><span class="nc">RegularExpressions</span>
    
    <span class="k">let</span> <span class="n">regexMatch</span> <span class="n">pattern</span> <span class="n">input</span> <span class="p">=</span>
        <span class="k">match</span> <span class="nn">Regex</span><span class="p">.</span><span class="nc">Match</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span> <span class="k">with</span>
        <span class="p">|</span> <span class="n">regexMatch</span> <span class="k">when</span> <span class="n">regexMatch</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="nc">Some</span><span class="p">(</span><span class="n">regexMatch</span><span class="p">.</span><span class="nc">Value</span><span class="p">)</span>
        <span class="p">|</span> <span class="p">_</span> <span class="p">-&gt;</span> <span class="nc">None</span>
</code></pre></div></div>

<p>The signature of the function above is:</p>

<blockquote>
  <p>string -&gt; string -&gt; string option</p>
</blockquote>

<p><code class="highlighter-rouge">string option</code> is just another way of writing <code class="highlighter-rouge">option&lt;string&gt;</code>. Instead of throwing an exception or null, we return a discriminated union that could be either a value or an empty value. You can then immediately see how to consume this function, purely from its signature. The function that then consumes this value, can use pattern matching to either extract the result from the Some union case, or do something with the None union case.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">open</span> <span class="nc">System</span>
<span class="k">open</span> <span class="nn">System</span><span class="p">.</span><span class="nn">Text</span><span class="p">.</span><span class="nc">RegularExpressions</span>
    
<span class="k">let</span> <span class="n">regexMatch</span> <span class="n">pattern</span> <span class="n">input</span> <span class="p">=</span>
    <span class="k">match</span> <span class="nn">Regex</span><span class="p">.</span><span class="nc">Match</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span> <span class="k">with</span>
    <span class="p">|</span> <span class="n">regexMatch</span> <span class="k">when</span> <span class="n">regexMatch</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="nc">Some</span><span class="p">(</span><span class="n">regexMatch</span><span class="p">.</span><span class="nc">Value</span><span class="p">)</span>
    <span class="p">|</span> <span class="p">_</span> <span class="p">-&gt;</span> <span class="nc">None</span>

<span class="k">let</span> <span class="n">getAge</span> <span class="n">input</span> <span class="p">=</span>
    <span class="k">match</span> <span class="n">regexMatch</span> <span class="o">@</span><span class="s2">"</span><span class="err">\</span><span class="s2">d+"</span> <span class="n">input</span> <span class="k">with</span>
    <span class="p">|</span> <span class="nc">Some</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">value</span>
    <span class="p">|</span> <span class="nc">None</span> <span class="p">-&gt;</span> <span class="s2">"Age is unknown"</span>
    
<span class="k">let</span> <span class="n">connelAge</span> <span class="p">=</span> <span class="n">getAge</span> <span class="s2">"Connel 26"</span>
<span class="k">let</span> <span class="n">bobAge</span> <span class="p">=</span> <span class="n">getAge</span> <span class="s2">"Bob N/A"</span>
</code></pre></div></div>

<p>In the above example connelAge equals “26” and bob equals “Age is unknown”. Consuming the option type forces us to cater for both a successful match and an unsuccessful match. The only way to get the inner value of a discriminated union is to pattern match and if we don’t have an exhaustive match expression, the compiler tells us off. It is impossible to access the value inside the option type when it is not there, so it is impossible to get a runtime exception by accessing it accidentally.</p>


            </div>
            <div id="comments">
                
                
<div class="fb-comments" data-href="http://connelhooley.uk/blog/2017/04/10/f-sharp-guide" data-numposts="5" data-width="100%"></div>

            </div>
        </div>
    </div>
</article>
</main>    
    <footer id="site-footer" class="site-footer-post">
        <div id="site-footer-inner">
            <div id="site-footer-copy">
                Connel Hooley <i class="far fa-copyright"></i> 2018
            </div>
            
            <div id="site-footer-contact">
                <a href="mailto:me@connelhooley.uk" target="_BLANK"><i class="fas fa-envelope fa-fw"></i>&nbsp;Email</a>&nbsp;&bull;
                <a href="https://twitter.com/connel_dev" target="_BLANK"><i class="fab fa-twitter fa-fw"></i>&nbsp;Twitter</a>&nbsp;&bull;
                <a href="http://uk.linkedin.com/in/connelhooley" target="_BLANK"><i class="fab fa-linkedin fa-fw"></i>&nbsp;LinkedIn</a>&nbsp;&bull;
                <a href="/feed.xml" target="_BLANK"><i class="fas fa-rss"></i>&nbsp;Blog RSS</a>
            </div>
            
        </div>
    </footer>
    
    <script src="/assets/js/vendor/jquery-3.1.1.min.js"></script>
    <script src="/assets/js/vendor/moment.min.js"></script>
    <script src="/assets/js/vendor/clipboard.min.js"></script>
    <script src="/assets/js/vendor/js.cookie.js"></script>
    <script src="/assets/js/vendor/stickyfill.min.js"></script>
    
    <script src="/assets/js/vendor/fixanchorlinks.js"></script>
    
    <script src="/assets/js/main.js"></script>
    
</body>